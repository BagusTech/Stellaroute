"use strict";void function(t){function e(e,i){var a=t('[data-prefix="'+(e||"")+'"] > ul');i.forEach(function(t){0===a.find('> [data-prefix="'+(e||"")+t+'/"]').length&&a.append('\n\t\t\t\t\t<li data-prefix="'+(e||"")+t+'/">\n\t\t\t\t\t\t<i class="fa fa-folder" aria-hidden="true"></i>\n\t\t\t\t\t\t'+t+"\n\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t</li>\n\t\t\t\t")})}function i(t){return t>1073741824?Math.ceil(t/1024/1024/1024)+"gb":t>1048576?Math.ceil(t/1024/1024)+"mb":t>1024?Math.ceil(t/1024)+"kb":t+"b"}function a(t){var e=i(t.Size),a=t.Key,n="\n\t\t\t<div class='file-picker--image' duck-image-value=\""+a.replace("-thumb2","")+'">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-xs-4">\n\t\t\t\t\t\t<img class="image--content" src="https://s3-us-west-2.amazonaws.com/stellaroute/'+a+'" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-8">\n\t\t\t\t\t\t<h3 class="image--name">'+a.split("/")[a.split("/").length-1].replace("-thumb2","")+'</h3>\n\t\t\t\t\t\t<h4 class="image--size">'+(e||"unknown")+"</h4>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t";return n}function n(t){return function(e){e.stopPropagation(),console.log("uploading"),t.attr("disabled",!0).html('<i class="fa fa-spinner fa-spin"></i> Uploading...')}}function r(t,e,i){return function(a,n){return a.stopPropagation(),t.attr("disabled",!1).text(n?"Try Again":"Upload Another Image"),n?void e.text("Sorry, something went wrong uploading your image."):(e.attr("duck-images",!1),void i.trigger("getFiles"))}}function c(t,e,i,a){return function(i){i.stopPropagation(),e.modal("show").attr("duck-image-picker",t.attr("duck-image-picker")),a.html('<div class="p-Xl ta-C js-waiting"><i class="fa fa-spinner fa-spin"></div>')}}function o(i,n){var r=t('[data-file-picker="header"] h2');return function(c,o,l){if(o)return void n.text("Sorry, something went wrong getting the images.");var d=l.files,f=l.folder,u=l.subFolders;l.marker,l.nextMarker;if(r.text(f||"Root"),d){n.html("");var s=d.filter(function(t){return t.Key.indexOf("-thumb2.")>-1}).sort(function(t,e){return t.LastModified>e.LastModified?-1:t.LastModified<e.LastModified?1:0});e(f,u),s?s.forEach(function(t){n.append(a(t))}):n.text("Sorry, there aren't any images in this folder."),n.closest('[data-function*="scroll"]').trigger("initScroll")}n.find(".file-picker--image").attr("image-selected",!1).filter(function(e,a){return t(a).attr("duck-image-value")===i.find("[duck-value]").val()}).attr("image-selected",!0)}}function l(e,i,a,l,d,f){var u=(e.find('input[type="file"]'),{fileUploading:n(i),filesUploaded:r(i,l,e),gettingFiles:c(e,a,d,l),gotFiles:o(e,l)});e.find('[duck-button="image-select"]').on("click",function(){e.trigger("getFiles")}),e.filePicker(u),f.on("click","[data-prefix]",function(i){i.stopPropagation();var a=t(i.target),n={folder:a.attr("data-prefix"),files:a.prop("files")};e.trigger("getFiles",[n])}),e.prop("filePickerInitiated",!0)}t(function(){var e=t("#ImagePickerModal"),i=e.find('[data-file-picker="upload"]'),a=e.find('[data-file-picker="cancel"]'),n=e.find('[data-file-picker="select"]'),r=e.find('[data-file-picker="content"]'),c=e.find('[data-file-picker="directory"]'),o=e.find('[data-file-picker="uploader"].file-picker--uploader'),d=e.find('[data-file-picker="footer"] button');i.add(a).on("click",function(){o.toggleClass("hidden"),d.toggleClass("hidden")}),r.on("click",".file-picker--image",function(e){e.stopPropagation();var i=t(e.currentTarget);r.find(".file-picker--image").filter(function(t,i){return i!==e.currentTarget}).attr("image-selected","false"),i.attr("image-selected","true"===i.attr("image-selected")?"false":"true")}),n.on("click",function(i){i.stopPropagation(),i.preventDefault();var a=r.find('[image-selected="true"]').attr("duck-image-value")||"",n=e.attr("duck-image-picker"),c=t('[duck-type="image"][duck-image-picker='+n+"]");e.modal("hide"),c.find("[duck-image-value]").text(a),c.find("[duck-value]").val(a)}),t('[duck-type="image"]').each(function(a,o){l(t(o),i,e,r,n,c)}),t('[duck-type="array"]').on("duckArrayItemAdded",function(a){var o=t(a.currentTarget),d=o.find('[duck-type="image"]').filter(function(e,i){return!t(i).prop("filePickerInitiated")});d.each(function(a,o){l(t(o),i,e,r,n,c)})})})}(jQuery.noConflict());
//# sourceMappingURL=filepicker.min.js.map
