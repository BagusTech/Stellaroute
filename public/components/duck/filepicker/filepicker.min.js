"use strict";void function(t){function e(e,i){var a=t('[data-prefix="'+e+'"] > ul');i.forEach(function(t){a.append('\n\t\t\t\t<li data-prefix="'+t+'/">\n\t\t\t\t\t<i class="fa fa-folder" aria-hidden="true"></i>\n\t\t\t\t\t'+t+"\n\t\t\t\t\t<ul></ul>\n\t\t\t\t</li>\n\t\t\t")})}function i(t){return t>1073741824?Math.ceil(t/1024/1024/1024)+"gb":t>1048576?Math.ceil(t/1024/1024)+"mb":t>1024?Math.ceil(t/1024)+"kb":t+"b"}function a(t,e){var a=i(e),n="\n\t\t\t<div class='file-picker--image' duck-image-value=\""+t.replace("-thumb2","")+'">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-xs-4">\n\t\t\t\t\t\t<img class="image--content" src="https://s3-us-west-2.amazonaws.com/stellaroute/'+t+'" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-8">\n\t\t\t\t\t\t<h3 class="image--name">'+t.split("/")[t.split("/").length-1].replace("-thumb2","")+'</h3>\n\t\t\t\t\t\t<h4 class="image--size">'+(a||"unknown")+"</h4>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t";return n}function n(t){return function(e){e.stopPropagation(),t.attr("disabled",!0).html('<i class="fa fa-spinner fa-spin"></i> Uploading...')}}function r(t,e,i){return function(a,n){return a.stopPropagation(),t.attr("disabled",!1).text(n?"Try Again":"Upload Another Image"),n?void e.text("Sorry, something went wrong uploading your image."):(e.attr("duck-images",!1),void i.trigger("getFiles"))}}function c(t,e,i,a){return function(i){i.stopPropagation(),e.modal("show").attr("duck-image-picker",t.attr("duck-image-picker")),"false"===a.attr("data-loaded")&&a.html('<div class="p-Xl ta-C js-waiting"><i class="fa fa-spinner fa-spin"></div>')}}function o(i,n){return function(r,c,o,d){if(c||!d)return void n.text("Sorry, something went wrong getting the images.");var l=d.files,u=d.folder,f=d.subFolders;d.marker,d.nextMarke;if(!o){n.html("");var s=l.filter(function(t){return t.Key.indexOf("-thumb2.")>-1}).sort(function(t,e){return t.LastModified>e.LastModified?-1:t.LastModified<e.LastModified?1:0});e(u||"/",f),s.forEach(function(t){n.append(a(t.Key,t.Size))}),n.attr("data-loaded",!0).closest('[data-function*="scroll"]').trigger("initScroll")}n.find(".file-picker--image").attr("image-selected",!1).filter(function(e,a){return t(a).attr("duck-image-value")===i.find("[duck-value]").val()}).attr("image-selected",!0)}}function d(e,i,a,d,l,u){var f=e.find('input[type="file"]'),s={fileUploading:n(i),filesUploaded:r(i,d,e),gettingFiles:c(e,a,l,d),gotFiles:o(e,d)};e.find('[duck-button="image-select"]').on("click",function(){e.trigger("getFiles",["true"===d.attr("data-loaded")])}),f.on("change",function(){e.trigger("uploadFiles")}),e.filePicker(s),u.on("click","[data-prefix]",function(i){i.stopPropagation();var a={folder:t(i.target).attr("data-prefix")};e.trigger("getFiles",[!1,a])}),e.prop("filePickerInitiated",!0)}t(function(){var e=t("#ImagePickerModal"),i=e.find('[data-file-picker="upload"]'),a=e.find('[data-file-picker="select"]'),n=e.find('[data-file-picker="content"]'),r=e.find('[data-file-picker="directory"]');i.on("click",function(){var i=e.attr("duck-image-picker"),a=t('[duck-type="image"][duck-image-picker='+i+"]"),n=a.find('input[type="file"]');n.click()}),n.on("click",".file-picker--image",function(e){e.stopPropagation();var i=t(e.currentTarget);n.find(".file-picker--image").filter(function(t,i){return i!==e.currentTarget}).attr("image-selected","false"),i.attr("image-selected","true"===i.attr("image-selected")?"false":"true")}),a.on("click",function(i){i.stopPropagation(),i.preventDefault();var a=n.find('[image-selected="true"]').attr("duck-image-value")||"",r=e.attr("duck-image-picker"),c=t('[duck-type="image"][duck-image-picker='+r+"]");e.modal("hide"),c.find("[duck-image-value]").text(a),c.find("[duck-value]").val(a)}),t('[duck-type="image"]').each(function(c,o){d(t(o),i,e,n,a,r)}),t('[duck-type="array"]').on("duckArrayItemAdded",function(c){var o=t(c.currentTarget),l=o.find('[duck-type="image"]').filter(function(e,i){return!t(i).prop("filePickerInitiated")});l.each(function(c,o){d(t(o),i,e,n,a,r)})})})}(jQuery.noConflict());
//# sourceMappingURL=filepicker.min.js.map
