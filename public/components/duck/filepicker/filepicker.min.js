"use strict";void function(t){function e(t){return t>1073741824?Math.ceil(t/1024/1024/1024)+"gb":t>1048576?Math.ceil(t/1024/1024)+"mb":t>1024?Math.ceil(t/1024)+"kb":t+"b"}function i(t,i){var a=e(i),n="\n\t\t\t<div class='file-picker--image' duck-image-value=\""+t.replace("-thumb2","")+'">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-xs-4">\n\t\t\t\t\t\t<img class="image--content" src="https://s3-us-west-2.amazonaws.com/stellaroute/'+t+'" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-8">\n\t\t\t\t\t\t<h3 class="image--name">'+t.split("/")[t.split("/").length-1].replace("-thumb2","")+'</h3>\n\t\t\t\t\t\t<h4 class="image--size">'+(a||"unknown")+"</h4>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t";return n}function a(t){return function(e){e.stopPropagation(),t.attr("disabled",!0).html('<i class="fa fa-spinner fa-spin"></i> Uploading...')}}function n(t,e,i){return function(a,n){return a.stopPropagation(),t.attr("disabled",!1).text(n?"Try Again":"Upload Another Image"),n?void e.text("Sorry, something went wrong uploading your image."):(e.attr("duck-images",!1),void i.trigger("getFiles"))}}function r(t,e,i,a){return function(i){i.stopPropagation(),e.modal("show").attr("duck-image-picker",t.attr("duck-image-picker")),"false"===a.attr("data-loaded")&&a.html('<div class="p-Xl ta-C js-waiting"><i class="fa fa-spinner fa-spin"></div>')}}function c(e,a){return function(n,r,c,o){if(!o&&(r||!c||!c.length))return void a.text("Sorry, something went wrong getting the images.");if(!o){a.html("");for(var d=c.filter(function(t){return t.Key.indexOf("-thumb2.")>-1}).sort(function(t,e){return t.LastModified>e.LastModified?-1:t.LastModified<e.LastModified?1:0}),l=d.length,u=0;u<l;u++){var f=d[u];a.append(i(f.Key,f.Size))}a.attr("data-loaded",!0).closest('[data-function*="scroll"]').trigger("initScroll")}a.find(".file-picker--image").attr("image-selected",!1).filter(function(i,a){return t(a).attr("duck-image-value")===e.find("[duck-value]").val()}).attr("image-selected",!0)}}function o(t,e,i,o,d){var l=t.find('input[type="file"]'),u={fileUploading:a(e),filesUploaded:n(e,o,t),gettingFiles:r(t,i,d,o),gotFiles:c(t,o)};t.find('[duck-button="image-select"]').on("click",function(){t.trigger("getFiles",["true"===o.attr("data-loaded")])}),l.on("change",function(){t.trigger("uploadFiles")}),t.filePicker(u),t.prop("filePickerInitiated",!0)}t(function(){var e=t("#ImagePickerModal"),i=e.find('[data-file-picker="upload"]'),a=e.find('[data-file-picker="select"]'),n=e.find('[data-file-picker="content"]');i.on("click",function(){var i=e.attr("duck-image-picker"),a=t('[duck-type="image"][duck-image-picker='+i+"]"),n=a.find('input[type="file"]');n.click()}),n.on("click",".file-picker--image",function(e){e.stopPropagation();var i=t(e.currentTarget);n.find(".file-picker--image").filter(function(t,i){return i!==e.currentTarget}).attr("image-selected","false"),i.attr("image-selected","true"===i.attr("image-selected")?"false":"true")}),a.on("click",function(i){i.stopPropagation(),i.preventDefault();var a=n.find('[image-selected="true"]').attr("duck-image-value")||"",r=e.attr("duck-image-picker"),c=t('[duck-type="image"][duck-image-picker='+r+"]");e.modal("hide"),c.find("[duck-image-value]").text(a),c.find("[duck-value]").val(a)}),t('[duck-type="image"]').each(function(r,c){o(t(c),i,e,n,a)}),t('[duck-type="array"]').on("duckArrayItemAdded",function(r){var c=t(r.currentTarget),d=c.find('[duck-type="image"]').filter(function(e,i){return!t(i).prop("filePickerInitiated")});d.each(function(r,c){o(t(c),i,e,n,a)})})})}(jQuery.noConflict());
//# sourceMappingURL=filepicker.min.js.map
