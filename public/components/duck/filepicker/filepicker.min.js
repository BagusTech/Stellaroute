"use strict";void function(t){function e(e){var i=t("<img/>",{src:"https://s3-us-west-2.amazonaws.com/stellaroute.com/"+e,alt:e,class:"m-Sm","duck-image-value":e.replace("-thumb2","").replace("images/",""),click:function(e){e.stopPropagation();var i=t(e.currentTarget);i.parent().find("img").attr("image-selected","false").removeClass("bw-Lg bc-Purp bs-S"),i.attr("image-selected","true").addClass("bw-Lg bc-Purp bs-S")}});return i}function i(t){return function(e){e.stopPropagation(),t.attr("disabled",!0).html('<i class="fa fa-spinner fa-spin"></i> Uploading...')}}function a(t,e,i){return function(a,n){return a.stopPropagation(),t.attr("disabled",!1).text(n?"Try Again":"Upload Another Image"),n?void e.text("Sorry, something went wrong uploading your image."):(e.attr("duck-images",!1),void i.trigger("getFiles"))}}function n(t,e,i,a){return function(i){i.stopPropagation(),e.modal("show").attr("duck-image-picker",t.attr("duck-image-picker")),"false"===a.attr("duck-images")&&a.html('<div class="p-Xl ta-C js-waiting"><i class="fa fa-spinner fa-spin"></div>')}}function r(t){return function(i,a,n){if(a||!n||!n.length)return void t.text("Sorry, something went wrong getting the images.");if("false"===t.attr("duck-images")){var r=n.filter(function(t){return t.Key.indexOf("-thumb2.")>-1}).sort(function(t,e){return t.LastModified>e.LastModified?-1:t.LastModified<e.LastModified?1:0}),c=r.length;t.find(".js-waiting").addClass("hidden");for(var o=0;o<c;o++)t.append(e(r[o].Key));t.attr("duck-images",!0)}}}function c(t,e,c,o,u){var d=t.find('input[type="file"]'),s={fileUploading:i(e),filesUploaded:a(e,o,t),gettingFiles:n(t,c,u,o),gotFiles:r(o)};t.find('[duck-button="image-select"]').on("click",function(){t.trigger("getFiles")}),d.on("change",function(){t.trigger("uploadFiles")}),t.filePicker(s),t.prop("filePickerInitiated",!0)}t(function(){var e=t("#ImagePickerModal"),i=e.find('[duck-button="upload"]'),a=e.find('[duck-button="save-image"]'),n=e.find("[duck-images]");i.on("click",function(){var i=e.attr("duck-image-picker"),a=t('[duck-type="image"][duck-image-picker='+i+"]"),n=a.find('input[type="file"]');n.click()}),a.on("click",function(i){i.stopPropagation(),i.preventDefault();var a=n.find('[image-selected="true"]').attr("duck-image-value")||"",r=e.attr("duck-image-picker"),c=t('[duck-type="image"][duck-image-picker='+r+"]");e.modal("hide"),c.find("[duck-image-value]").text(a),c.find("[duck-value]").val(a)}),t('[duck-type="image"]').each(function(r,o){c(t(o),i,e,n,a)}),t('[duck-type="array"]').on("duckArrayItemAdded",function(r){var o=t(r.currentTarget),u=o.find('[duck-type="image"]').filter(function(e,i){return!t(i).prop("filePickerInitiated")});u.each(function(r,o){c(t(o),i,e,n,a)})})})}(jQuery.noConflict());
//# sourceMappingURL=filepicker.min.js.map
