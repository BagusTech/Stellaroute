{"version":3,"sources":["components/duck/filepicker/filepicker.js"],"names":["$","selectCurrentFile","$imagePicker","find","each","i","image","$image","prop","addClass","$imagePickerModal","e","stopPropagation","preventDefault","currentTarget","startVal","$this","val","modal","$select","on","selectedImage","change","text","$targetFile","not","removeClass","fileManager"],"mappings":"iBAAA,UAAAA,GAGC,QAAAC,GAAAC,GAGCA,EAAaC,KAAK,wBAAwBC,KAAK,SAACC,EAAGC,GADpD,GAAAC,GAASN,EAAAA,EAEPM,GAAMA,KAAWD,WAAjBJ,EAAAM,KAAA,qBAGCD,EAAOE,SAAS,iCAMnBT,EAAE,WADF,GAAAU,GAAAV,EAAA,qBACEE,EAAMQ,EAAAP,KAAA,qBACDO,EAAAA,EAAsBP,KAAA,6BAE5BH,GAAA,gBAAgBU,GAAAA,QAAAA,sBAAuB,SAAAC,GAGtCA,EAAEC,kBADHZ,EAAEa,gBAEDF,IAAEE,GAAAA,EAAFF,EAAAG,eAGMC,EAAWC,EAAMb,KAAK,gBAAgBc,KAA5CP,GAAiBM,MAAMb,QAGvBD,EAAaM,KAAK,aAAcQ,GADhCN,EAAAA,KAAkBQ,mBAAlBH,GACAb,EAAkBA,KAGlBiB,EAXDC,GAAA,QAAA,SAAAT,GAcCA,EAAEC,kBADHO,EAAAA,gBAECR,IAAEE,GAAAA,EAAFL,KAAA,cAGMa,EAAgBnB,EAAaM,KAAK,qBAAxCD,GAAMc,KAAAA,gBAAgBnB,IAAAA,GAAkBoB,SAGxCf,EAAOJ,KAAK,sBAAsBoB,KAAKF,GADvCd,EAAYW,MAAA,UAGZhB,EAVDkB,GAAA,aAAA,SAAAT,EAAAa,GAaCd,EAAkBP,KAAK,gCAAgCsB,IAAID,GAAaE,YAAY,+BADrFxB,EAAakB,KAAG,qBAAcI,EAAIA,KAAgB,YAGjDtB,EAHDkB,GAAA,WAAA,WAMCnB,EAAkBC,KAClBA,EAFDyB,iBAIAzB,OAAAA","file":"filepicker.min.js","sourcesContent":["/* global jQuery */\r\n\r\nvoid function initDuckFilepicker($) {\r\n\t'use strict';\r\n\r\n\tfunction selectCurrentFile($imagePicker) {\r\n\t\t$imagePicker.find('.file-manager--image').each((i, image) => {\r\n\t\t\tconst $image = $(image);\r\n\r\n\t\t\tif($image.attr('title') === $imagePicker.prop('duck-start-value')) {\r\n\t\t\t\t$image.addClass('file-manager--image__active');\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// run after dom has loaded\r\n\t$(() => {\r\n\t\tconst $imagePickerModal = $('#ImagePickerModal');\r\n\t\tconst $imagePicker = $imagePickerModal.find('[duck-filepicker]');\r\n\t\tconst $select = $imagePickerModal.find('[duck-filepicker=\"select\"]');\r\n\t\t\r\n\t\t$('[duck-table]').on('click', '[duck-type=\"image\"]', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst $this = $(e.currentTarget);\r\n\t\t\tconst startVal = $this.find('[duck-value]').val();\r\n\r\n\t\t\t$imagePickerModal.modal('show');\r\n\t\t\t$imagePicker.prop('duck-image', $this);\r\n\t\t\t$imagePicker.prop('duck-start-value', startVal);\r\n\t\t\tselectCurrentFile($imagePicker);\r\n\t\t});\r\n\r\n\t\t$select.on('click', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst $image = $imagePicker.prop('duck-image');\r\n\t\t\tconst selectedImage = $imagePicker.prop('duck-current-value');\r\n\r\n\t\t\t$image.find('[duck-value]').val(selectedImage).change();\r\n\t\t\t$image.find('[duck-image-value]').text(selectedImage);\r\n\t\t\t$imagePickerModal.modal('hide');\r\n\t\t});\r\n\r\n\t\t$imagePicker.on('selectFile', (e, $targetFile) => {\r\n\t\t\t$imagePickerModal.find('.file-manager--image__active').not($targetFile).removeClass('file-manager--image__active');\r\n\t\t\t$imagePicker.prop('duck-current-value', $targetFile.attr('title'));\r\n\t\t});\r\n\r\n\t\t$imagePicker.on('gotFiles', () => {\r\n\t\t\tselectCurrentFile($imagePicker);\r\n\t\t});\r\n\r\n\t\t$imagePicker.fileManager();\r\n\t});\r\n}(jQuery.noConflict());"]}