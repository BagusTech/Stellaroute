{"version":3,"sources":["components/scroll/scroll.js"],"names":["$","initScroll","wrapper","$wrapper","$contentWrapper","outerHeight","find","contentWrapperHeight","$content","contentHeight","$scrollBar","$scrollBarButton","currentScrollBarHeight","scrollBarHeightRatio","scrollBarHeightTrue","scrollBarHeight","maxScroll","ratio","topOffset","maxTop","leftClick","middleClick","moving","top","customScrolling","e","animate","trueTop","clientY","offset","percentDone","trueScrollTop","scrollTopOffset","scrollTopCalc","scrollTopMax","scrollTopVal","topVal","scrollTop","css","trigger","startScrolling","which","position","stopScrolling","unbind","sideBarScroll","middle","scrollSpeed","scrollBy","scrolling","setInterval","isOverScrollBarButton","isUnderScrollBarButton","clearInterval","mouseWheelScroll","preventDefault","stopPropagation","scrollValue","originalEvent","wheelDelta","detail","middleClickScroll","mousemove","scrollTo","value","scrollbarTop","reInit","removeClass","document","customScroll","mousedown","mousewheel","on","mouseup","addClass","fn","this","each","index","jQuery"],"mappings":"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","file":"scroll.min.js","sourcesContent":["/*global jQuery */\r\nvoid function initializeCustomScroll($) {\r\n    'use strict';\r\n\r\n    const initScroll = function initScroll(wrapper) {\r\n        const $wrapper = $(wrapper);\r\n        const $contentWrapper = $wrapper.find('> [data-scroll=\"content-wrapper\"]');\r\n        const contentWrapperHeight = $contentWrapper.outerHeight();\r\n        const $content = $contentWrapper.find('[data-scroll=\"content\"]');\r\n        const contentHeight = $content.outerHeight();\r\n        const $scrollBar = $wrapper.find('> [data-scroll=\"scrollbar\"]');\r\n        const $scrollBarButton = $scrollBar.find('button');\r\n        const currentScrollBarHeight = $scrollBarButton.outerHeight();\r\n        const scrollBarHeightRatio = contentWrapperHeight / contentHeight;\r\n        const scrollBarHeightTrue = contentWrapperHeight * scrollBarHeightRatio;\r\n        const scrollBarHeight = scrollBarHeightTrue < currentScrollBarHeight ? currentScrollBarHeight\r\n                                                                             : scrollBarHeightTrue;\r\n        const maxScroll = contentHeight - contentWrapperHeight;\r\n        const ratio = contentHeight/ (contentWrapperHeight - scrollBarHeight);\r\n        const topOffset = contentHeight - maxScroll;\r\n        const maxTop = contentWrapperHeight - scrollBarHeight;\r\n        const leftClick = 1;\r\n        const middleClick = 2;\r\n        let moving = false;\r\n        let top = 0;\r\n        let offset = 0;\r\n\r\n        $scrollBarButton.outerHeight(scrollBarHeight);\r\n\r\n        // I think this can be removed, but not 100% sure\r\n        // $wrapper.on('reInitScroll', () => initScroll($wrapper));\r\n\r\n        const customScrolling = function customScrolling(e, animate) {\r\n            if (moving){\r\n                const trueTop = (e.clientY - offset);\r\n                const percentDone = trueTop / maxTop >= 0 ? trueTop / maxTop : 0;\r\n                const trueScrollTop = trueTop * ratio;\r\n                const scrollTopOffset = topOffset * percentDone;\r\n                const scrollTopCalc = trueScrollTop - scrollTopOffset;\r\n                const scrollTopMax = scrollTopCalc > maxScroll ? maxScroll : scrollTopCalc;\r\n                const scrollTopVal = scrollTopCalc > 0 ? scrollTopMax : 0;\r\n                const topVal = trueTop > 0 ? trueTop : 0;\r\n\r\n                top = topVal > maxTop ? maxTop : topVal;\r\n\r\n                if (animate){\r\n                    $scrollBarButton.animate({'top': `${top}px`});\r\n                    $contentWrapper.animate({scrollTop: scrollTopVal});\r\n                } else {\r\n                    $scrollBarButton.css('top', `${top}px`);\r\n                    $contentWrapper.scrollTop(scrollTopVal);\r\n                }\r\n\r\n                $contentWrapper.trigger('scrolling');\r\n            }\r\n        };\r\n\r\n        const startScrolling = function startScrolling(e) {\r\n            e.stopPropagation();\r\n\r\n            if (contentWrapperHeight !== $contentWrapper.outerHeight()){\r\n                $wrapper.trigger('reinit');\r\n\r\n                return;\r\n            }\r\n\r\n            if (e.which === leftClick){\r\n                moving = true;\r\n                offset = e.clientY - $scrollBarButton.position().top;\r\n              $('body').mousemove(customScrolling);\r\n            }\r\n        };\r\n\r\n        const stopScrolling = function stopScrolling() {\r\n            if (moving){\r\n                moving = false;\r\n                $('body').unbind('mousemove', customScrolling);\r\n            }\r\n        };\r\n\r\n        const sideBarScroll = function sideBarScroll(e) {\r\n            const middle = 2;\r\n            const scrollSpeed = 50;\r\n            let scrollBy = 2;\r\n            moving = true;\r\n\r\n            const scrolling = setInterval(() => {\r\n                if (moving){\r\n                    const isOverScrollBarButton = $scrollBarButton.offset().top > e.clientY;\r\n                    const isUnderScrollBarButton = $scrollBarButton.offset().top + (scrollBarHeight / middle)\r\n                                                   < e.clientY;\r\n\r\n                    if (!isOverScrollBarButton && !isUnderScrollBarButton){\r\n                        return;\r\n                    }\r\n\r\n                    offset = 0;\r\n\r\n                    if (isOverScrollBarButton) {\r\n                        customScrolling({ clientY: top - scrollBy});\r\n                    } else if (isUnderScrollBarButton){\r\n                        customScrolling({ clientY: top + scrollBy});\r\n                    }\r\n\r\n                    scrollBy++;\r\n                } else {\r\n                    clearInterval(scrolling);\r\n                }\r\n            }, scrollSpeed);\r\n        };\r\n\r\n        const mouseWheelScroll = function mouseWheelScroll(e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            // different browsers use different event properties\r\n            const scrollValue = e.originalEvent.wheelDelta || -e.originalEvent.detail;\r\n            const scrollBy = 3;\r\n\r\n            offset = 0;\r\n            moving = true;\r\n\r\n            if (scrollValue > 0) {\r\n                // scroll up\r\n\r\n                customScrolling({ clientY: top - scrollBy});\r\n            } else {\r\n                // scroll down\r\n\r\n                customScrolling({ clientY: top + scrollBy});\r\n            }\r\n\r\n            moving = false;\r\n        };\r\n\r\n        const middleClickScroll = function middleClickScroll(e) {\r\n            e.stopPropagation();\r\n\r\n            if (contentWrapperHeight !== $contentWrapper.outerHeight()){\r\n                $wrapper.trigger('reinit');\r\n\r\n                return;\r\n            }\r\n\r\n            if (e.which === middleClick){\r\n                e.preventDefault();\r\n\r\n                moving = true;\r\n                offset = e.clientY - $scrollBarButton.position().top;\r\n              $('body').mousemove(customScrolling);\r\n            }\r\n        };\r\n\r\n        const scrollTo = function scrollTo(e, value) {\r\n            const scrollbarTop = value / ratio;\r\n            const percentDone = (scrollbarTop / maxScroll);\r\n            const scrollTop = scrollbarTop + (topOffset * percentDone);\r\n\r\n            moving = true;\r\n            offset = 0;\r\n            customScrolling({ clientY: scrollTop }, true);\r\n            moving = false;\r\n        };\r\n\r\n        const reInit = function reInit() {\r\n            $wrapper.removeClass('no-scrollbar');\r\n            $scrollBar.unbind('mousedown', sideBarScroll);\r\n            $scrollBarButton.unbind('mousedown', startScrolling);\r\n            $contentWrapper.unbind('mousewheel', mouseWheelScroll);\r\n            $contentWrapper.unbind('mousedown', middleClickScroll);\r\n            $contentWrapper.unbind('scrollTo', scrollTo);\r\n            $(document).unbind('mouseup', stopScrolling);\r\n            $wrapper.unbind('reinit', reInit);\r\n\r\n            $wrapper.customScroll();\r\n\r\n            return false;\r\n        };\r\n\r\n        $scrollBar.mousedown(sideBarScroll);\r\n        $scrollBarButton.mousedown(startScrolling);\r\n        $contentWrapper.mousedown(middleClickScroll);\r\n        $contentWrapper.mousewheel(mouseWheelScroll);\r\n        $contentWrapper.on('scrollTo', scrollTo);\r\n        $(document).mouseup(stopScrolling);\r\n        $wrapper.on('reinit', reInit);\r\n\r\n        if (scrollBarHeightRatio >= 1){\r\n            $wrapper.addClass('no-scrollbar');\r\n            return false;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    $.fn.customScroll = function init() {\r\n        return this.each((index, wrapper) => {\r\n            initScroll($(wrapper));\r\n        });\r\n    };\r\n\r\n    jQuery(() => $('[data-function=\"scroll\"]').customScroll());\r\n}(jQuery);\r\n"]}