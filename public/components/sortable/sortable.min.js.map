{"version":3,"sources":["components/sortable/sortable.js"],"names":["$","moveItem","e","movingDown","$active","$sibling","siblingTop","siblingHeight","newSiblingTop","outerHeight","$movingItem","detach","before","checkPosition","sortItemQuery","next","prev","activeTop","position","top","isMoving","sort","stopPropagation","mouseTop","clientY","$item","itemToSort","windowToScroll","$windowToScroll","scrollTop","offset","mouseStartTop","data","scrollOffset","itemStartTop","currentTop","parseInt","css","scrollSpeed","windowHeight","startSort","$this","currentTarget","closest","$wrapper","wrapper","$items","items","each","i","item","left","outerWidth","height","addClass","document","on","stopSort","$sorting","length","right","removeClass","moveUp","moveDown","sortable","sortItems","$customScroll","window","attr","$sortHandles","find","$sortButtons","duck","findRelevantChildren","$upButtons","$downButtons","off","stopProp","prop","this","index","jQuery","noConflict"],"mappings":"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","file":"sortable.min.js","sourcesContent":["/*global jQuery, duck */\r\n\r\nvoid function initializeIcon($) {\r\n\t'use strict';\r\n\r\n\tfunction moveItem(e, movingDown, $active, $sibling, siblingTop, siblingHeight) {\r\n\t\tif(siblingHeight) {\r\n\t\t\tconst newSiblingTop = movingDown ? siblingTop - $active.outerHeight() : siblingTop + $active.outerHeight();\r\n\t\t\t$sibling.css('top', `${newSiblingTop}px`);\r\n\t\t}\r\n\r\n\t\tconst $movingItem = $sibling.detach();\r\n\r\n\t\tif(movingDown) {\r\n\t\t\t$active.before($movingItem);\r\n\t\t} else {\r\n\t\t\t$active.after($movingItem);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction checkPosition($active, movingDown, sortItemQuery) {\r\n\t\tconst $sibling = movingDown ? $active.next(sortItemQuery) : $active.prev(sortItemQuery);\r\n\t\tif(!$sibling.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst activeTop = $active.position().top;\r\n\t\tconst siblingTop = $sibling.position().top;\r\n\t\tconst siblingHeight = $sibling.outerHeight();\r\n\t\tconst isMoving = movingDown ? activeTop > siblingTop : activeTop < (siblingTop + (siblingHeight/2));\r\n\r\n\r\n\t\tif(isMoving) {\r\n\t\t\t$active.trigger('moveItem', [movingDown, $active, $sibling, siblingTop, siblingHeight]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sort(e) {\r\n\t\te.stopPropagation();\r\n\r\n\t\tconst mouseTop = e.clientY;\r\n\t\tconst $item = e.data.itemToSort;\r\n\t\tconst $windowToScroll = e.data.windowToScroll;\r\n\t\tconst scrollTop = $windowToScroll.scrollTop();\r\n\t\tconst offset = mouseTop - e.data.mouseStartTop;\r\n\t\tconst top = e.data.itemStartTop + offset + e.data.scrollOffset;\r\n\t\tconst currentTop = parseInt($item.css('top'), 10);\r\n\t\tconst movingDown = top - currentTop > 0\r\n\t\tconst scrollSpeed = 10;\r\n\r\n\t\t$item.css('top', `${top}px`);\r\n\r\n\t\t// if mouse top is near top of window in view while moving up\r\n\t\tif(!movingDown && mouseTop < 100) {\r\n\t\t\t$windowToScroll.scrollTop(scrollTop - scrollSpeed);\r\n\t\t\te.data.scrollOffset -= scrollSpeed;\r\n\t\t} else if(movingDown && e.data.windowHeight - mouseTop < 100) {\r\n\t\t\t$windowToScroll.scrollTop(scrollTop + scrollSpeed);\r\n\t\t\te.data.scrollOffset += scrollSpeed;\r\n\t\t}\r\n\r\n\t\tcheckPosition(e.data.itemToSort, movingDown, e.data.sortItemQuery)\r\n\t}\r\n\r\n\tfunction startSort(e) {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\tconst $this = $(e.currentTarget).closest('[data-sort=\"item\"]');\r\n\t\tconst $wrapper = e.data.wrapper;\r\n\t\tconst $items = e.data.items;\r\n\t\tconst sortItemQuery = e.data.sortItemQuery;\r\n\r\n\t\t$items.each((i, item) => {\r\n\t\t\tconst $item = $(item);\r\n\r\n\t\t\t$item.css('top', `${$item.position().top}px`);\r\n\t\t\t$item.css('left', `${$item.position().left}px`);\r\n\t\t\t$item.css('right', `${$wrapper.outerWidth() - ($item.outerWidth() + $item.position().left)}px`);\r\n\t\t});\r\n\r\n\t\t$wrapper.height($wrapper.height())\r\n\r\n\t\t$wrapper.addClass('sorting');\r\n\t\t$this.addClass('sorting');\r\n\t\t\r\n\t\t$(document).on('mousemove', {\r\n\t\t\titemToSort: $this,\r\n\t\t\titemStartTop: parseInt($this.css('top'), 10),\r\n\t\t\tmouseStartTop: e.clientY,\r\n\t\t\twindowToScroll: e.data.windowToScroll,\r\n\t\t\twindowHeight: e.data.windowToScroll.outerHeight(),\r\n\t\t\tscrollOffset: 0,\r\n\t\t\tsortItemQuery,\r\n\t\t}, sort);\r\n\t}\r\n\r\n\tfunction stopSort(e) {\r\n\t\te.stopPropagation();\r\n\r\n\t\tconst $sorting = $('.sorting');\r\n\r\n\t\tif($sorting.length) {\r\n\t\t\t$('[data-function*=\"sort\"]').height('');\r\n\t\t\t$('[data-sort=\"item\"]').css({'top': '', 'left': '', 'right': ''});\r\n\t\t\t$sorting.removeClass('sorting');\r\n\t\t\t$(document).off('mousemove', sort);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction moveUp(e) {\r\n\t\te.stopPropagation();\r\n\t\tconst $active = $(e.currentTarget).closest(e.data.sortItemQuery);\r\n\t\tconst $sibling = $active.prev(e.data.sortItemQuery);\r\n\r\n\t\tif($sibling.length) {\r\n\t\t\t$active.trigger('moveItem', [false, $active, $sibling]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction moveDown(e) {\r\n\t\te.stopPropagation();\r\n\t\tconst $active = $(e.currentTarget).closest(e.data.sortItemQuery);\r\n\t\tconst $sibling = $active.next(e.data.sortItemQuery);\r\n\r\n\t\tif($sibling.length) {\r\n\t\t\t$active.trigger('moveItem', [true, $active, $sibling]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sortable(wrapper, sortItems) {\r\n\t\tconst $wrapper = $(wrapper).attr('data-function', 'sort');\r\n\t\tconst $customScroll = $wrapper.closest('[data-scroll=\"content-wrapper\"]');\r\n\t\tconst $windowToScroll = $customScroll.length ? $customScroll : $(window);\r\n\t\tconst sortItemQuery = sortItems || '[data-sort=\"item\"]';\r\n\t\tconst $items = $wrapper.find(`> ${sortItemQuery}`).attr('data-sort', 'item');\r\n\r\n\t\tif($items.length < 2) {return;}\r\n\r\n\t\tconst $sortHandles = $items.find('[data-sort=\"handle\"]')\r\n\t\tconst $sortButtons = duck.findRelevantChildren($items, '[data-sort-buttons]');\r\n\t\tconst $upButtons = $sortButtons.find('[data-sort=\"up\"]');\r\n\t\tconst $downButtons = $sortButtons.find('[data-sort=\"down\"]');\r\n\r\n\t\tif($wrapper.prop('sortInitaited')) {\r\n\t\t\t$wrapper.find('a, button, input, select, textarea, [duck-type=\"wysiwyg\"] .simpleMDE').off('mousedown', duck.stopProp);\r\n\r\n\t\t\t$upButtons.off('click', moveUp);\r\n\t\t\t$downButtons.off('click', moveDown);\r\n\r\n\t\t\t$sortHandles.off('mousedown', startSort);\r\n\t\t\t$items.off('mousedown', startSort);\r\n\t\t\t$items.off('moveItem', moveItem);\r\n\r\n\t\t\t$(document).off('mouseup', stopSort);\r\n\t\t}\r\n\r\n\t\t// stop propagation on anything the user might actually be interacting with\r\n\t\t$wrapper.find('a, button, input, select, textarea, [duck-type=\"wysiwyg\"] .simpleMDE').on('mousedown', duck.stopProp);\r\n\r\n\t\t$upButtons.on('click', {sortItemQuery}, moveUp);\r\n\t\t$downButtons.on('click', {sortItemQuery}, moveDown);\r\n\r\n\t\tif($sortHandles.length) {\r\n\t\t\t$sortHandles.on('mousedown', {wrapper: $wrapper, items: $items, windowToScroll: $windowToScroll, sortItemQuery}, startSort);\r\n\t\t} else {\r\n\t\t\t$items.on('mousedown', {wrapper: $wrapper, items: $items, windowToScroll: $windowToScroll, sortItemQuery}, startSort);\r\n\t\t}\r\n\t\t\r\n\t\t$items.on('moveItem', moveItem);\r\n\r\n\t\t$(document).on('mouseup', stopSort);\r\n\r\n\t\t$wrapper.prop('sortInitaited', true);\r\n\t}\r\n\r\n\t$.fn.sortable = function init(sortItems) {\r\n\t\treturn this.each((index, wrapper) => {\r\n\t\t\tsortable(wrapper, sortItems);\r\n\t\t});\r\n\t};\r\n\r\n\t$(() => $('[data-function*=\"sort\"]').sortable());\r\n}(jQuery.noConflict(), duck);"]}