{"version":3,"sources":["controls/favorite/favorite.js"],"names":["$","duck","favorite","e","stopPropagation","preventDefault","data","button","$icon","icon","$button","attr","guide","isFavorite","card","prop","addClass","type","JSON","stringify","url","contentType","success","removeClass","error","triggerFavorite","trigger","fn","favoriteButton","i","wrapper","off","on","jQuery","noConflict"],"mappings":"iBAAA,UAAAA,EAAAC,GAGC,QAAAC,GAAAC,GAGCA,EAAEC,kBADHD,EAAAE,gBAECF,IAAEE,GAAFF,EAAAG,KAAAC,OAGMC,EAAQL,EAAEG,KAAKG,KADfC,EAAN,SAAkBJ,EAAlBK,KAAA,cACMH,GACNI,MAAMC,EAAAA,KAAaH,cACnBI,KAAMR,EAAOK,KAAA,aACZC,KAAAA,EAAOF,KAAA,aACPI,aAAcH,EAFFD,GAAbK,KAAA,YAAA,GAQAP,EAAMQ,SAAS,WAAfR,EAAAA,MAGCS,KAAM,OADPjB,IAAA,YACCiB,KAAMC,KAAAC,UADAb,GAENc,YAAK,mBACLd,QAAMY,WACNG,EAAAA,KAAa,YAAA,GACbC,EAAAA,YAAS,WACRZ,EAAQK,KAAK,cAAYF,GACzBL,YAAMe,4BAGNC,MAVK,WAWNA,EAAOD,YAAA,cAMT,QAASE,GAAgBtB,GAAzBA,EAAAC,kBACCD,EAAEC,gBAGF,IAAMM,GAAUP,EAAEG,KAAKC,MAEvBG,GAAQgB,QAAQ,iBAGjB1B,EAAE2B,GAAGC,eAAiB,WAAtB5B,MAAK4B,MAAAA,KAAAA,SAALC,EAAsBC,GACrB,GAAOpB,GAAUV,EAAA8B,GACVpB,EAAUV,EAAE8B,KAAlB,MAGApB,GAAQqB,IAAI,QAASN,GAAiBO,GAAG,SAAUzB,OAAQG,GAAUe,GAArEf,EAAQqB,IAAI,gBAASN,GAAiBO,GAAG,iBAAkBtB,OAATA,EAAmBe,KAAAA,GAArEvB,MAKFF,EAAE,WAAFA,EAAE,uBAAM4B,oBAARK,OAAAC,aAAAjC","file":"favorite.min.js","sourcesContent":["/* global jQuery, duck */\r\n\r\nvoid function _initFavorite($, duck) {\r\n\t'use strict';\r\n\r\n\tfunction favorite(e) {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\tconst $button = e.data.button;\r\n\t\tconst $icon = e.data.icon;\r\n\t\tconst isFavorite = $button.attr('isFavorite') === 'true';\r\n\t\tconst data = {\r\n\t\t\tguide: $button.attr('data-guide'),\r\n\t\t\tcard: $button.attr('data-card'),\r\n\t\t\tuser: $button.attr('data-user'),\r\n\t\t\taddFavorite: !isFavorite,\r\n\t\t}\r\n\r\n\t\t$button.prop('disabled', true);\r\n\t\t$icon.addClass('fa-spin');\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype: 'POST',\r\n\t\t\turl: '/favorite',\r\n\t\t\tdata: JSON.stringify(data),\r\n\t\t\tcontentType: 'application/json',\r\n\t\t\tsuccess: () => {\r\n\t\t\t\t$button.prop('disabled', false);\r\n\t\t\t\t$icon.removeClass('fa-spin');\r\n\t\t\t\t$button.attr('isFavorite', !isFavorite)\r\n\t\t\t\t\t\t.toggleClass('favorite-button__active');\r\n\t\t\t},\r\n\t\t\terror: () => {\r\n\t\t\t\t$icon.removeClass('fa-spin');\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\tfunction triggerFavorite(e) {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\tconst $button = e.data.button;\r\n\r\n\t\t$button.trigger('duck.favorite');\r\n\t}\r\n\r\n\t$.fn.favoriteButton = function initFavorite() {\r\n\t\treturn this.each((i, wrapper) => {\r\n\t\t\tconst $button = $(wrapper);\r\n\t\t\tconst $icon = $button.find('.fa');\r\n\r\n\t\t\t$button.off('click', triggerFavorite).on('click', {button: $button}, triggerFavorite);\r\n\t\t\t$button.off('duck.favorite', favorite).on('duck.favorite', {button: $button, icon: $icon}, favorite)\r\n\t\t});\r\n\t}\r\n\r\n\t$(() => {\r\n\t\t$('.js-favorite-button').favoriteButton()\r\n\t});\r\n}(jQuery.noConflict(), duck)\r\n\r\n/*\r\nbutton.js-favorite-button.favorite-button(\r\n\tdata-guide=guide,\r\n\tdata-card=card,\r\n\tdata-user= user.Id,\r\n\ttype='submit',\r\n\tisFavorite= isFavorite,\r\n\tclass= isFavorite ? (card ? 'favorite-button__icon favorite-button__active' : 'favorite-button__button favorite-button__active') : (card ? 'favorite-button__icon' : 'favorite-button__button'))\r\n*/"]}