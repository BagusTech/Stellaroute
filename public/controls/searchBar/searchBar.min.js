"use strict";void function(t){function a(a,s){a.stopPropagation();var n=a.data.input,e=a.data.icon,r=a.data.resultsWrapper,i=a.data.results,c=a.data.backdrop,o=a.data.zIndex,p=s||n.val();return e.hasClass("fa-search")&&e.toggleClass("fa-search fa-spin fa-spinner"),!p||!p.trim()||p.trim().length<3?(i.html("").append("<p>Sorry, you must have at least 3 letters before searching</p>"),r.removeClass("hidden"),void e.toggleClass("fa-search fa-spin fa-spinner")):void t.ajax({type:"POST",url:"/search",contentType:"application/json",data:JSON.stringify({term:p}),success:function(a){c.removeClass("hidden"),o.css("z-index",1042),i.html(""),r.removeClass("hidden"),a&&a.length?a.forEach(function(s,n){var e=t("\n\t\t\t\t\t\t\t"+(0===n?"<span class='f-L pl-Sm mt-XXs'>"+a.length+" results</span>":"")+"\n\t\t\t\t\t\t\t<a class='search-results--result' href='/"+s.author+"/"+s.url+"'>\n\t\t\t\t\t\t\t\t<div class='w-25 f-L'>\n\t\t\t\t\t\t\t\t\t<img class='w-100' src='https://s3-us-west-2.amazonaws.com/stellaroute/"+s.cardImage.replace(".jpg","-thumb1.jpg").replace(".jpeg","-thumb1.jpeg")+"' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='w-75 f-L plr-Sm pb-Sm ta-L fc-B'>\n\t\t\t\t\t\t\t\t\t<h2 class='mt-Sm'>"+s.names.display+"</h2>\n\t\t\t\t\t\t\t\t\t<p class='fc-G__Dk lh-1 hidden-xs'>"+(s.tagline||"No Tagline Provided")+"</p>\n\t\t\t\t\t\t\t\t\t<div class='js-countries fs-Sm'></div>\n\t\t\t\t\t\t\t\t\t<div class='js-tags fs-Sm hidden mt-Xs'></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t");s.countriesDisplay&&!function(){var t=e.find(".js-countries");s.countriesDisplay.forEach(function(a){t.append("<span class='fc-W bg-Gr p-XXs d-Ib'>"+a+"</span>")})}(),s.tags&&!function(){var t=e.find(".js-tags");t.removeClass("hidden"),s.tags.forEach(function(a){t.append("<span class='bw-Sm bs-S bc-G p-XXs d-Ib'>"+a+"</span>")})}(),i.append(e)}):i.append("<p>No results</p>"),e.toggleClass("fa-search fa-spin fa-spinner")},err:function(t){throw t}})}function s(t){t.stopPropagation(),t.data.resultsWrapper.addClass("hidden"),t.data.backdrop.addClass("hidden"),t.data.zIndex.css("z-index","auto"),t.data.input.val("")}function n(t){t.stopPropagation();var a=t.data.wrapper,s=t.data.icon,n=t.data.input;s.hasClass("fa-search")&&n.val()&&s.toggleClass("fa-search fa-spin fa-spinner"),clearTimeout(t.data.timeout),t.data.timeout=setTimeout(function(){a.trigger("duck.search",[n.val()])},1e3)}function e(t){t.stopPropagation(),t.preventDefault(),t.data.wrapper.trigger("duck.search")}function r(r){var i=t(r),c=i.find(".js-search-icon"),o=i.find(".js-search-input"),p=i.find(".js-search-button"),d=i.find(".js-search-results-wrapper"),l=i.find(".js-search-results"),u=i.find(".js-close-search"),f=i.find(".js-seach-backdrop"),h=t(".js-search-bar-z-index"),g=void 0;o.off("input",n).on("input",{wrapper:i,icon:c,input:o,timeout:g},n),i.off("duck.search",a).on("duck.search",{input:o,icon:c,resultsWrapper:d,results:l,backdrop:f,zIndex:h},a),u.off("click",s).on("click",{resultsWrapper:d,backdrop:f,input:o,zIndex:h},s),p.off("click",e).on("click",{wrapper:i},e)}t.fn.searchBar=function(){return this.each(function(t,a){return r(a)})},t(function(){t(".js-search-bar").searchBar()})}(jQuery.noConflict());
//# sourceMappingURL=searchBar.min.js.map
