"use strict";function showSubmittedReviews(){var e="";$.getJSON("/review/submitted-reviews",function(t){$.each(t,function(){e+='<div class="col-sm-6 col-xs-12"><div class="profile">',e+='<h2 class="bw-0 bbw-Sm bc-G bs-S mb-0">'+this.name+'<small class="d-Ib pb-Xs">'+this.rating+"</small></h2>",e+='<small class="mb-Sm mt-Xs d-B">'+this.address+"</small>",e+='<div class="row">',e+='<section class="col-xs-12">',e+='<h3 class="m-0">Comments</h3>',e+='<p class="mt-Xs">'+this.comments+"</p>",e+="</section>",e+="<section>",e+='<div class="col-xs-6">',e+='<h3 class="m-0">Cost</h3>',e+=this.cost.amount+" "+this.cost.currency+"per/"+this.cost.unit,e+="</div>",e+='<div class="col-xs-6">',e+='<h3 class="m-0">Length of Stay</h3>',e+=this.stay.length+" "+this.stay.unit,e+="</div>",e+="</section>",e+="</div>",e+='<h4 class="c-B bw-0 bs-S btw-Sm bc-G pt-Sm">Reviewer\'s Interests</h4>',e+='<div class="row checkbox">',e+='<label class="col-sm-3 col-xs-6"><input class="adventure" type="checkbox" value="adventure" checked="'+this.interest.adventure+'" disabled />Adventure</label>',e+='<label class="col-sm-3 col-xs-6"><input class="culture" type="checkbox" value="culture" checked="'+this.interest.culture+'" disabled />Culture</label>',e+='<label class="col-sm-3 col-xs-6"><input class="family" type="checkbox" value="family" checked="'+this.interest.family+'" disabled />Family</label>',e+='<label class="col-sm-3 col-xs-6"><input class="nightlife" type="checkbox" value="nightlife" checked="'+this.interest.nightlife+'" disabled />Nightlife</label>',e+='<label class="col-sm-3 col-xs-6"><input class="architecture" type="checkbox" value="architecture" checked="'+this.interest.architecture+'" disabled />Architecture</label>',e+='<label class="col-sm-3 col-xs-6"><input class="history" type="checkbox" value="history" checked="'+this.interest.history+'" disabled />History</label>',e+='<label class="col-sm-3 col-xs-6"><input class="food" type="checkbox" value="food" checked="'+this.interest.food+'" disabled />Food</label>',e+='<label class="col-sm-3 col-xs-6"><input class="scenery" type="checkbox" value="scenery" checked="'+this.interest.scenery+'" disabled />Scenery</label>',e+='<label class="col-sm-3 col-xs-6"><input class="museums" type="checkbox" value="museums" checked="'+this.interest.museums+'" disabled />Museums</label>',e+='<label class="col-sm-3 col-xs-6"><input class="outdoors" type="checkbox" value="outdoors" checked="'+this.interest.outdoors+'" disabled />Outdoors</label>',e+='<label class="col-sm-3 col-xs-6"><input class="exotics" type="checkbox" value="exotics" checked="'+this.interest.exotics+'" disabled />Exotics</label>',e+='<label class="col-sm-3 col-xs-6"><input class="music" type="checkbox" value="music" checked="'+this.interest.music+'" disabled />Music</label>',e+='<label class="col-sm-3 col-xs-6"><input class="nature" type="checkbox" value="nature" checked="'+this.interest.nature+'" disabled />Nature</label>',e+='<label class="col-sm-3 col-xs-6"><input class="sports" type="checkbox" value="sports" checked="'+this.interest.sports+'" disabled />Sports</label>',e+="</div>",e+='<div class="c-B ta-R">',e+='<button class="btn btn-info update-button mr-Sm" value="'+this.Id+'">Update</button>',e+='<button class="btn btn-danger delete-button" value="'+this.Id+'">Delete</button>',e+="</div>",e+="</div></div>"}),$("#SubmittedReviews").html(e)}).done(function(){$(".delete-button").click(deleteReview),$(".update-button").click(updateMode),$(".cancel-update-button").click(updateMode)})}function submitReview(e){function t(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}e.preventDefault();var s=t(),c=0;if($("#Review input").each(function(){""===$(this).val()&&c++}),$("#Review textarea").each(function(){""===$(this).val()&&c++}),0!==c)return alert("Please fill in all fields"),!1;var l={Id:s,name:$("#Name").val(),rating:$("#Rating").val(),type:$("#Type").val(),address:$("#Address").val(),comments:$("#Comments").val(),stay:{length:$("#Time").val(),unit:$("[name=time]:checked").val()},cost:{amount:$("#Amount").val(),currency:$("#Currency").val(),unit:$("#MoneyUnit").val()},interest:{adventure:$("#Adventure").prop("checked"),culture:$("#Culture").prop("checked"),family:$("#Family").prop("checked"),nightlife:$("#Nightlife").prop("checked"),architecture:$("#Architecture").prop("checked"),history:$("#History").prop("checked"),food:$("#Food").prop("checked"),scenery:$("#Scenery").prop("checked"),museums:$("#Museums").prop("checked"),outdoors:$("#Outdoors").prop("checked"),exotics:$("#Exotics").prop("checked"),music:$("#Music").prop("checked"),nature:$("#Nature").prop("checked"),sports:$("#Sports").prop("checked")}};$.ajax({type:"POST",data:JSON.stringify(l),url:"/review/submit-review",contentType:"application/json"}).done(function(e){console.log("done!"),""===e.msg?($("#Review input[type=text]").val(""),$("#Review input[type=number]").val(""),$("input[type=checkbox]").prop("checked",!1),$("#Review textarea").val("")):alert("Error: "+e.msg)}).fail(function(e){console.log(e)})}function deleteReview(e){e.preventDefault();var t=confirm("Are you sure you would like to delete this review?");return t!==!0?!1:void $.ajax({type:"DELETE",url:"/review/delete-review/"+$(this).val()}).done(function(e){""===e.msg?showSubmittedReviews():console.log("Error: "+e.msg)})}function updateReview(e){e.preventDefault();var t={Id:$(this).val(),Country:$("#UpdateCountry").val(),Thoughts:$("#UpdateThoughts").val()};$.ajax({type:"PUT",data:t,url:"/review/update-review",dataType:"JSON"}).done(function(e){""===e.msg?showSubmittedReviews():(console.log("Error: "+e.msg),alert("Failed to update, see console for error"),showSubmittedReviews())})}$(document).ready(function(){$(".delete-button").click(deleteReview),$(".update-button").click(updateMode),$(".cancel-update-button").click(updateMode),$("#SubmitReview").on("click",submitReview)});var updateMode=function e(t){t.preventDefault();var s=$(this).parent().parent(),c=s.find(".update-button"),l=s.find(".delete-button"),a=s.find(".country"),i=s.find(".thoughts");console.log(c),s.toggleClass("update-mode"),l.unbind(),c.unbind(),c.toggleClass("btn-info"),c.toggleClass("btn-success"),$(".update").click(updateReview);var o,n;s.hasClass("update-mode")?(l.click(e),c.click(updateReview),o=a.text(),n=i.text(),a.html('<input class="form-control" id="UpdateCountry" value="'+o+'"/>'),i.html('<textarea class="form-control" id="UpdateThoughts" />'),$("#UpdateThoughts").val(n),l.text("Cancel")):(l.click(deleteReview),c.click(e),o=$("#UpdateCountry").val(),n=$("#UpdateThoughts").val(),a.text(o),i.text(n))};
//# sourceMappingURL=calls.min.js.map
