{"version":3,"sources":["js/controls/betaSignup.js"],"names":["jQuery","$","$emailInput","$emailSubmit","$guideInput","$guideSubmit","isValid","email","re","test","$error","failed","toggleClass","setTimeout","click","e","preventDefault","val","text","user","local.email","recieveNewsletter","ajax","type","data","JSON","stringify","url","contentType","done","response","msg","css","slideDown","fail","$header","$text","request","fromEmail"],"mappings":"AAAA,YAAAA,QAAO,SAAmCC,GACzC,GAAIC,GAAcD,EAAE,sBAChBE,EAAeF,EAAE,uBACjBG,EAAcH,EAAE,sBAChBI,EAAeJ,EAAE,uBAEjBK,EAAU,SAASC,GACtB,GAAIC,GAAK,wJAET,OAAOA,GAAGC,KAAKF,IAGZG,EAAST,EAAE,8BACXU,EAAS,WACZD,EAAOE,YAAY,UAEnBC,WAAW,WACVH,EAAOE,YAAY,WACjB,KAGJT,GAAaW,MAAM,SAASC,GAC3BA,EAAEC,gBAEF,IAAIT,GAAQL,EAAYe,KAExB,IAAGX,EAAQC,GAAO,CACjBN,EAAE,8BAA8BiB,KAAK,yEACrC,IAAIC,IACHC,cAAeb,EACfc,mBAAmB,EAGpBpB,GAAEqB,MACDC,KAAM,OACNC,KAAMC,KAAKC,UAAUP,GACrBQ,IAAK,qBACLC,YAAa,qBACXC,KAAK,SAASC,GACI,YAAjBA,EAASC,KACX9B,EAAE,sCAAsC+B,IAAI,UAAW,GACvD/B,EAAE,gCAAgCgC,UAAU,MAE5CtB,MAGCuB,KAAK,SAASJ,GAChBnB,UAGDA,OAIFN,EAAaS,MAAM,SAASC,GAC3BA,EAAEC,gBAEF,IAAImB,GAAUlC,EAAE,gCACZmC,EAAQnC,EAAE,8BACVoC,GACHC,UAAWpC,EAAYe,MACvBoB,QAASjC,EAAYa,MAGtBhB,GAAEqB,MACDC,KAAM,OACNC,KAAMC,KAAKC,UAAUW,GACrBV,IAAK,oBACLC,YAAa,qBACXC,KAAK,SAASC,GACI,YAAjBA,EAASC,KACXI,EAAQjB,KAAK,sCACbkB,EAAMlB,KAAK,6EACXd,EAAYa,IAAI,KAEhBN,MAGCuB,KAAK,SAASJ,GAChBnB","file":"js/controls/betaSignup.min.js","sourcesContent":["jQuery(function initLandingPageJavascript($){\r\n\tvar $emailInput = $('#EmailCaptureInput');\r\n\tvar $emailSubmit = $('#EmailCaptureButton');\r\n\tvar $guideInput = $('#RequestGuideInput');\r\n\tvar $guideSubmit = $('#RequestGuideButton');\r\n\r\n\tvar isValid = function(email){\r\n\t\tvar re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\n\t\treturn re.test(email);\r\n\t};\r\n\r\n\tvar $error = $('[data-beta-signup=\"error\"]');\r\n\tvar failed = function() {\r\n\t\t$error.toggleClass('active');\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\t$error.toggleClass('active');\r\n\t\t}, 2000);\r\n\t};\r\n\r\n\t$emailSubmit.click(function(e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tvar email = $emailInput.val();\r\n\r\n\t\tif(isValid(email)){\r\n\t\t\t$('[data-beta-signup=\"error\"]').text('Sorry, we experienced an error. Please refresh the page and try again.');\r\n\t\t\tvar user = {\r\n\t\t\t\t\"local.email\": email,\r\n\t\t\t\trecieveNewsletter: true\r\n\t\t\t};\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\turl: '/newsletter-signup',\r\n\t\t\t\tcontentType: 'application/json'\r\n\t\t\t}).done(function(response) {\r\n\t\t\t\tif(response.msg === \"success\"){\r\n\t\t\t\t\t$('[data-beta-signup=\"email-capture\"]').css('opacity', 0);\r\n\t\t\t\t\t$('[data-beta-signup=\"success\"]').slideDown(180);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfailed();\r\n\t\t\t\t}\r\n\r\n\t\t\t}).fail(function(response) {\r\n\t\t\t\tfailed();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tfailed();\r\n\t\t}\r\n\t});\r\n\r\n\t$guideSubmit.click(function(e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tvar $header = $('[data-submit-guide=\"header\"]');\r\n\t\tvar $text = $('[data-submit-guide=\"text\"]');\r\n\t\tvar request = {\r\n\t\t\tfromEmail: $emailInput.val(),\r\n\t\t\trequest: $guideInput.val()\r\n\t\t};\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: JSON.stringify(request),\r\n\t\t\turl: '/request-location',\r\n\t\t\tcontentType: 'application/json'\r\n\t\t}).done(function(response) {\r\n\t\t\tif(response.msg === \"success\"){\r\n\t\t\t\t$header.text('Success! You\\'ve Requested a Guide.');\r\n\t\t\t\t$text.text('We\\'ll get back to you as quickly as we can. Feel free to request another.');\r\n\t\t\t\t$guideInput.val('');\r\n\t\t\t} else {\r\n\t\t\t\tfailed();\r\n\t\t\t}\r\n\r\n\t\t}).fail(function(response) {\r\n\t\t\tfailed();\r\n\t\t});\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}