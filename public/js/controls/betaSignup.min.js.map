{"version":3,"sources":["js/controls/betaSignup.js"],"names":["jQuery","$","$emailInput","$emailSubmit","$guideSubmit","re","test","email","$error","failed","toggleClass","setTimeout","click","e","preventDefault","val","isValid","text","recieveNewsletter","ajax","type","JSON","stringify","user","data","url","response","contentType","done","css","slideDown","fail","$header","$text","fromEmail","request","msg"],"mappings":"YACAA,QAAO,SAACC,GACP,GAAAC,GAAAD,EAAA,sBAGME,EAAeF,EAAE,uBADjBC,EAAgBD,EAAA,sBAChBE,EAAiBF,EAAA,uBAEjBG,EAAAA,SAAAA,GAGL,GAAMC,GAAK,wJAAX,OAAMA,GAAKC,KAAAC,IADZC,EAAAP,EAAA,8BAOMQ,EAAS,WADfD,EAAMA,YAAW,UAEhBA,WAAOE,WAGNF,EAAOE,YAAY,WADpBC,KAGAR,GANDS,MAAA,SAAAC,GASCA,EAAEC,gBAAFD,IAAEC,GAAAA,EAAFC,KAEA,IAAAC,EAAMT,GAAQL,CAGbD,EAAE,8BAA8BgB,KAAK,yEADtC,IAAGD,IACFf,cAAEM,EACFW,mBAAa,EAAAjB,GAAbkB,MAMCC,KAAM,OADPnB,KAAOoB,KAAAC,UAAAC,GACNH,IAAAA,qBACAI,YAAWF,qBACXG,KAAK,SAAAC,GACQ,YAAbC,EAAAA,KAJD1B,EAKG2B,sCAAmBC,IAAA,UAAA,GACrB5B,EAAA,gCAA8B6B,UAAA,MAE7B7B,MAGA8B,KAAA,WAXFtB,UAPDA,OA4BDL,EAAaQ,MAAM,SAACC,GAApBT,EAAAA,gBAGC,IAAM4B,GAAU/B,EAAE,gCAAZ+B,EAAU/B,EAAE,8BACZgC,GACNC,UAAMC,EAAUpB,MACfmB,QAAAA,EAAWhC,MAIZD,GAAEkB,MAAFlB,KAAO,OACNmB,KAAMC,KAAAC,UADAa,GAENX,IAAAA,oBACAC,YAAK,qBACLE,KAAAA,SAAAA,GACQD,YAANE,EAAKQ,KACPJ,EAAGN,KAASU,sCACXJ,EAAAA,KAAQf,6EACRgB,EAAWlB,IAAA,KAFZN,MAQEsB,KAAK,WACPtB","file":"js/controls/betaSignup.min.js","sourcesContent":["/*global jQuery */\r\njQuery(($) => {\r\n\t'use strict'\r\n\r\n\tconst $emailInput = $('#EmailCaptureInput');\r\n\tconst $emailSubmit = $('#EmailCaptureButton');\r\n\tconst $guideInput = $('#RequestGuideInput');\r\n\tconst $guideSubmit = $('#RequestGuideButton');\r\n\r\n\tconst isValid = (email) => {\r\n\t\tconst re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\n\t\treturn re.test(email);\r\n\t};\r\n\r\n\tconst $error = $('[data-beta-signup=\"error\"]');\r\n\tconst failed = function() {\r\n\t\t$error.toggleClass('active');\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\t$error.toggleClass('active');\r\n\t\t}, 2000);\r\n\t};\r\n\r\n\t$emailSubmit.click((e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst email = $emailInput.val();\r\n\r\n\t\tif(isValid(email)){\r\n\t\t\t$('[data-beta-signup=\"error\"]').text('Sorry, we experienced an error. Please refresh the page and try again.');\r\n\t\t\tconst user = {\r\n\t\t\t\t\"local.email\": email,\r\n\t\t\t\trecieveNewsletter: true,\r\n\t\t\t};\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\turl: '/newsletter-signup',\r\n\t\t\t\tcontentType: 'application/json',\r\n\t\t\t}).done((response) => {\r\n\t\t\t\tif(response.msg === \"success\"){\r\n\t\t\t\t\t$('[data-beta-signup=\"email-capture\"]').css('opacity', 0);\r\n\t\t\t\t\t$('[data-beta-signup=\"success\"]').slideDown(180);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfailed();\r\n\t\t\t\t}\r\n\r\n\t\t\t}).fail(() => {\r\n\t\t\t\tfailed();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tfailed();\r\n\t\t}\r\n\t});\r\n\r\n\t$guideSubmit.click((e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst $header = $('[data-submit-guide=\"header\"]');\r\n\t\tconst $text = $('[data-submit-guide=\"text\"]');\r\n\t\tconst request = {\r\n\t\t\tfromEmail: $emailInput.val(),\r\n\t\t\trequest: $guideInput.val(),\r\n\t\t};\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: JSON.stringify(request),\r\n\t\t\turl: '/request-location',\r\n\t\t\tcontentType: 'application/json',\r\n\t\t}).done((response) => {\r\n\t\t\tif(response.msg === \"success\"){\r\n\t\t\t\t$header.text('Success! You\\'ve Requested a Guide.');\r\n\t\t\t\t$text.text('We\\'ll get back to you as quickly as we can. Feel free to request another.');\r\n\t\t\t\t$guideInput.val('');\r\n\t\t\t} else {\r\n\t\t\t\tfailed();\r\n\t\t\t}\r\n\r\n\t\t}).fail(() => {\r\n\t\t\tfailed();\r\n\t\t});\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}