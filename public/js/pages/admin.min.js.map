{"version":3,"sources":["js/pages/admin.js"],"names":["$","duck","$clearCache","table","clearCache","tablesToClear","length","prop","shift","text","initClearCache","$users","click","$user","$submitSpinner","find","append","$submit","toggleClass","each","i","user","successCallback","duckForm","$reset","key","initAddCity","$form","sendResetEmail","userEmail","window","on","jQuery","noConflict","country","val","location"],"mappings":"iBAAA,UAAAA,EAAAC,OAGC,YA4BCC,QAAAA,GAAkBC,GACjBC,EAAAA,GAAWC,WAAAA,WATPA,EAAcC,OAWlBJ,EAAYK,EAAZC,SA7BFN,EAAAK,KAAA,YAAA,GAAAE,KAAA,iBACC,GAAMP,GAAcF,EAAE,eADlBK,GAASK,cACPR,SACAG,cAGA,aAWN,YACMF,iBACDE,SACFD,gBADD,kBAGCF,YACA,QALF,eAmBDS,GAAYC,MAAA,WACXR,EAAMS,EAANL,SAEAN,EAAMY,KAAAA,YAAyBC,GAAKN,KAApC,yBAAAO,OAAA,wDAIAC,YAAqBH,GAAAA,GAAAA,EAAeI,eAPrCP,GAAOQ,KAAK,SAACC,EAAGC,GASfR,GAAME,GAAKf,EAAAqB,GACVlB,EAD+CU,EAAAE,KAAA,iBAE1CD,EAF0CG,EAAAF,KAAA,KAG/CO,EAAAA,EAAiBP,KAAA,sBAChBE,EAAaJ,EAAAE,KAAY,kBAAzBN,MAEAQ,GAAAL,MAAA,WAAAE,EAAAI,YAAA,YANFL,EAAME,KAAK,4BAA4BQ,UASvCC,MAAOZ,QAlBRa,IAAA,KAHDH,gBAAA,WAgBIL,EAAQV,KAAK,YAAY,GAS7BO,EAAcY,YAAc,aAI1BC,EAAMJ,MAAAA,EAASK,eAAAC,aAIb,YAJa7B,EAAf8B,QAAAC,GAAA,OAAA,WAHD,GAAAJ,GAAA3B,EAAA,6CAWAgC,GAAOC,UAPLX,gBAAiB,WAChB,GAAMY,GAAUP,EAAMZ,KAAK,iCAAiCoB,KAC5DL,QAAOM,SAAP,IAAsBpC,EAAAA,sBAAwBkC,EAAxB,MAAqCC,MAA3D,IAAoER,EAAMZ,KAAK,4BAA4BoB,eAK9GH,OAAOC,aAAchC","file":"admin.min.js","sourcesContent":["/* global jQuery, duck */\r\n\r\nvoid function initAdminControls($, duck) {\r\n\t'use strict';\r\n\r\n\tvoid function initClearCache() {\r\n\t\tconst $clearCache = $('#ClearCache');\r\n\t\tconst tablesToClear = [ 'Attractions',\r\n\t\t\t\t\t\t\t\t'Cities',\r\n\t\t\t\t\t\t\t\t'CityRegions',\r\n\t\t\t\t\t\t\t\t'Continents',\r\n\t\t\t\t\t\t\t\t'Countries',\r\n\t\t\t\t\t\t\t\t'CountryRegions',\r\n\t\t\t\t\t\t\t\t'Guides',\r\n\t\t\t\t\t\t\t\t'Neighborhoods',\r\n\t\t\t\t\t\t\t\t'ProvinceRegions',\r\n\t\t\t\t\t\t\t\t'Provinces',\r\n\t\t\t\t\t\t\t\t'Users',\r\n\t\t\t\t\t\t\t\t'WorldRegions',\r\n\t\t\t\t\t\t\t];\r\n\r\n\t\tfunction clearCache(table) {\r\n\t\t\tduck(table).clearCache(() => {\r\n\t\t\t\tif(tablesToClear.length) {\r\n\t\t\t\t\tclearCache(tablesToClear.shift())\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$clearCache.prop('disabled', false).text('Clear Cache');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$clearCache.click(() => {\r\n\t\t\tclearCache(tablesToClear.shift());\r\n\r\n\t\t\t$clearCache.prop('disabled', true).text('Clearing, Please Wait').append('<i class=\"fa fa-spinner fa-spin ml-Xs\"></i>');\r\n\t\t});\r\n\t}();\r\n\r\n\tvoid function initUpdateUser() {\r\n\t\tconst $users = $('#UserList li');\r\n\r\n\t\t$users.each((i, user) => {\r\n\t\t\tconst $user = $(user);\r\n\t\t\tconst $submit = $user.find('[duck-button]');\r\n\t\t\tconst $submitSpinner = $submit.find('i');\r\n\t\t\tconst $reset = $user.find('.js-password-reset');\r\n\t\t\tconst userEmail = $user.find('.js-user-email').text();\r\n\r\n\t\t\t$submit.click(() => {$submitSpinner.toggleClass('hidden')});\r\n\r\n\t\t\t$user.find('[duck-function=\"update\"]').duckForm({\r\n\t\t\t\ttable: 'Users',\r\n\t\t\t\tkey: 'Id',\r\n\t\t\t\tsuccessCallback: () => {\r\n\t\t\t\t\t$submit.prop('disabled', false);\r\n\t\t\t\t\t$submitSpinner.toggleClass('hidden');\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\t$reset.click(duck.sendResetEmail(userEmail));\r\n\t\t})\r\n\t}();\r\n\r\n\tvoid function initAddCity() {\r\n\t\t$(window).on('load', () => {\r\n\t\t\tconst $form = $('[duck-table=\"Cities\"][duck-function=\"add\"]');\r\n\r\n\t\t\t$form.duckForm({\r\n\t\t\t\tsuccessCallback: () => {\r\n\t\t\t\t\tconst country = $form.find('[duck-field=\"country\"] select').val();\r\n\t\t\t\t\twindow.location = `/${$(`[data-country-url=\"${country}\"]`).val()}/${$form.find('[duck-field=\"url\"] input').val()}`;\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t});\r\n\t}();\r\n}(jQuery.noConflict(), duck);"]}