{"version":3,"sources":["js/pages/profile/profile.js"],"names":["$","$error","$userForm","$userSubmit","find","val","$username","startingUsername","newUsername","duck","exists","field","value","fineOne","length","trigger","on","removeClass","successCallback","addClass","errorCallBack","_$error","clone","setTimeout","$changePasswordModal","$changePasswordForm","$passwordFields","$passwordSubmit","e","stopPropagation","preventDefault","eq","prop","closest","duckForm","modal","$newGuideSubmit","$newGuideForm","append","location","pathname","window"],"mappings":"iBAAA,UAAAA,GAGCA,EAAA,WAGC,GAAMC,GAASD,EAAE,qGAGXE,EAAYF,EAAE,oCADrBG,EAAAD,EAAAE,KAAA,0BACOF,EAAcA,EAAAE,KAAA,wCACdD,EAAcD,EAAeG,KAEnCC,GAAMC,KAAAA,eAAmBD,WAAAA,MAAA,YAGxB,GAAME,GAAcF,EAAUD,KADAI,MAAA,SAAMC,QAAMC,MAAA,WAAAC,MAAAJ,EAAAK,SAAA,GAAA,SAAAC,GACpCN,MAAAA,GAAcF,IAApBE,EAIEF,EAAUS,QAAQ,oBADnBT,EAAIQ,QAAA,yBAKJX,EANDa,GAAA,QAAA,WAOAb,EAV8BC,KAAA,KAAAa,YAAA,YAY/Bd,EAAAA,UAAee,gBAAe,WAC7Bf,EAAYC,KAAK,YAAKa,GAAYb,KAAA,KAAlCe,SAAA,WADDC,cAAA,WAOC,GAAMC,GAAUpB,EAAOqB,OAFvBnB,GAAAA,KAAA,YAAA,GAAAC,KAAA,KAAAe,SAAA,UACAjB,EAAEkB,OAAAA,GAMFG,WAAW,WAHXpB,EAAAA,QAAA,MACAD,KAEAqB,WAAAA,WACCF,EAAAA,UADD,QAMC,IAAEG,GAFHxB,EAAA,mBAZDyB,EAAAD,EAAApB,KAAA,wBAoBMsB,EAAkBD,EAAoBrB,KAAK,0BAHlDuB,EAAAF,EAAArB,KAAA,yBAECsB,GAAMD,GAAAA,QAAsBD,SAAAA,GAC5BI,EAAAC,kBACAD,EAAAE,iBAEAJ,EAAmBK,GAAA,GAAnB1B,QAA4BqB,EAAOK,GAAA,GAAA1B,OAAAqB,EAAAK,GAAA,GAAA1B,MAAAS,OAAA,GAAAY,EAAAK,GAAA,GAAA1B,MAAAS,OAAA,GAClCc,EAAAI,KAAA,YAAA,GACAJ,EAAAK,QAAA,eAAAd,SAAA,eAEAO,EAAIA,QAAA,eAAgCA,YAAgBK,aACnDJ,EAAgBK,KAAK,YAAY,MAIjCL,EAAAA,GAAgBK,QAAK,WACrBL,EAAAvB,KAAA,KAAAa,YAAA,YAGFU,EAAmBO,UAAShB,gBAAM,WACjCS,EAAgBvB,KAAK,YAAKa,GAAYb,KAAA,KAAtCe,SAAA,UADDK,EAAAW,MAAA,UAMCX,IAAAA,GAAAA,EAAqBW,yBAFtBC,EAAAC,EAAAjC,KAAA,yBAKDgC,GAAApB,GAAA,QAAA,WACCoB,EAAMC,OAAkB,2CAGxBD,EAAAA,UAAmBlB,gBAAe,WACjCkB,OAAAA,SAAgBE,OAAOC,SAAAC,SAAvBJ,IAAuBpC,EAAA,mCAAvBK,YAIAoC,OAAAA","file":"profile.min.js","sourcesContent":["/* global jQuery, duck */\r\n\r\nvoid function initRequest($){\r\n\t'use strict';\r\n\r\n\t$(() => {\r\n\t\tconst $error = $('<div class=\"alert alert-danger p-A z-1 l-0 r-0 t-0\">Something went wrong, please try again.</div>');\r\n\r\n\t// USER FORM\r\n\t\tconst $userForm = $('#MySettings [duck-table=\"Users\"]');\r\n\t\tconst $userSubmit = $userForm.find('[duck-button=\"submit\"]');\r\n\t\tconst $username = $userForm.find('[duck-field=\"username\"] [duck-value]');\r\n\t\tconst startingUsername = $username.val();\r\n\r\n\t\t$username.prop('validateFunc', () => () => {\r\n\t\t\tconst newUsername = $username.val();\r\n\t\t\t\r\n\t\t\tduck('Users').exists({field: 'username', value: newUsername, fineOne: true}, (length) => {\r\n\t\t\t\tif (length === \"0\" || startingUsername === newUsername) {\r\n\t\t\t\t\t$username.trigger('passedValidation');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$username.trigger('failedValidation');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$userSubmit.on('click', () => {\r\n\t\t\t$userSubmit.find('i').removeClass('hidden');\r\n\t\t});\r\n\r\n\t\t$userForm.duckForm({successCallback: () => {\r\n\t\t\t$userSubmit.prop('disabled', false).find('i').addClass('hidden');\r\n\t\t}, errorCallBack: () => {\r\n\t\t\tconst _$error = $error.clone();\r\n\r\n\t\t\t$userSubmit.prop('disabled', false).find('i').addClass('hidden');\r\n\t\t\t$userForm.append(_$error);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t_$error.slideUp(270);\t\t\t\t\r\n\t\t\t}, 3000);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t_$error.remove();\t\t\t\t\r\n\t\t\t}, 3270);\r\n\t\t}});\r\n\r\n\t// CHANGE PASSWORD FORM\r\n\t\tconst $changePasswordModal = $('#ChangePassword'); \r\n\t\tconst $changePasswordForm = $changePasswordModal.find('[duck-table=\"Users\"]');\r\n\t\tconst $passwordFields = $changePasswordForm.find('input[type=\"password\"]');\r\n\t\tconst $passwordSubmit = $changePasswordForm.find('[duck-button=\"submit\"]');\r\n\r\n\t\t$passwordFields.on('input', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif(($passwordFields.eq(0).val() !== $passwordFields.eq(1).val()) || $passwordFields.eq(0).val().length < 6 || $passwordFields.eq(1).val().length < 6) {\r\n\t\t\t\t$passwordSubmit.prop('disabled', true);\r\n\t\t\t\t$passwordFields.closest('.form-group').addClass('has-error');\r\n\t\t\t} else {\r\n\t\t\t\t$passwordFields.closest('.form-group').removeClass('has-error');\r\n\t\t\t\t$passwordSubmit.prop('disabled', false);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$passwordSubmit.on('click', () => {\r\n\t\t\t$passwordSubmit.find('i').removeClass('hidden');\r\n\t\t});\r\n\r\n\t\t$changePasswordForm.duckForm({successCallback: () => {\r\n\t\t\t$passwordSubmit.prop('disabled', false).find('i').addClass('hidden');\r\n\t\t\t$changePasswordModal.modal('hide');\r\n\t\t}});\r\n\r\n\t// NEW GUIDE FORM\r\n\t\tconst $newGuideForm = $('[duck-table=\"Guides\"]');\r\n\t\tconst $newGuideSubmit = $newGuideForm.find('[duck-button=\"submit\"]');\r\n\r\n\t\t$newGuideSubmit.on('click', () => {\r\n\t\t\t$newGuideSubmit.append('<i class=\"fa fa-spin fa-spinner\"></i>');\r\n\t\t});\r\n\r\n\t\t$newGuideForm.duckForm({successCallback: () => {\r\n\t\t\twindow.location = `${window.location.pathname}/${$('[duck-field=\"url\"] [duck-value]').val()}`;\r\n\t\t}});\r\n\t});\r\n\r\n}(jQuery.noConflict())"]}