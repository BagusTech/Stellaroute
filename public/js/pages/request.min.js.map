{"version":3,"sources":["js/pages/request.js"],"names":["$","duck","failed","$flash","find","show","slideUp","setTimeout","success","response","msg","$requestForms","prop","error","$selectRequestForm","on","addClass","val","removeClass","each","i","form","$form","click","e","preventDefault","location","$type","type","$location","description","attraction","html","subject","sendEmail","$description","$attraction","request","jQuery","noConflict"],"mappings":"iBAAA,UAAAA,EAAAC,GAaE,QAJDC,KAOCC,EAAOC,KAAK,iBAAiBC,KAAK,GADnCF,EAAAE,KAASH,GAERC,WAAA,WAGCA,EAAOG,QAAQ,KADhBC,EAAAA,KAAW,iBAAMD,QAAA,MAChBH,KAGD,QAAAK,GAAAC,GAGqB,YAAjBA,EAASC,KADdP,EAASK,KAAAA,kBAAkBH,KAAA,GAC1BF,EAAIM,KAASC,GAEZP,WAAA,WAGCA,EAAOG,QAAQ,KADhBC,EAAAA,KAAW,kBAAMD,QAAA,MAChBH,KAEAI,WAHD,WAMCI,EAAcP,KAAK,mBAAmBQ,KAAK,YAAY,IADxDL,MAECL,IAIF,QAAAW,KAAAX,IAtCD,GAAAY,GAAAd,EAAA,sBAGMW,EAAgBX,EAAE,oBADlBc,EAAAA,EAAAA,sBAENA,GAAiBC,GAAA,SAAA,WAGhBJ,EAAcK,SAAS,UAAvBL,EAAAA,YAAcK,EAAdC,OAAAC,YAAA,YAiCDP,EAAAQ,KAAiB,SAAAC,EAAAC,GAAEnB,GAAAA,GAAAA,EAAAA,EAKlBoB,GAAMlB,KAAK,mBAAmBmB,MAAM,SAACC,GAHtCb,EAAAA,KAAAA,mBAAuBU,KAAJ,YAAa,GAC/BG,EAAAC,gBAEAH,IAAMlB,GAAKkB,EAAAlB,KAAA,iBACJA,EAAKkB,EAAAlB,KAAA,iBAAwBa,MACjCQ,EAAFH,EAAAlB,KAAA,qBAKMsB,EAAWJ,EAAMlB,KAAK,qBAAqBa,MAH3CU,EAAcvB,EAAKA,KAAA,wBACnBwB,EAAaxB,EAAKA,KAAA,wBAAxBa,MACMY,EAAYP,EAAAlB,KAAW,uBACvBsB,EAAWJ,EAAAlB,KAAW,uBAA5Ba,MAEMa,EAAAA,+CAEAC,EAAAA,KAAaT,iBAAWL,MAFxBa,oBAENF,EAFME,mDAiBUR,EAAAlB,KAAA,iBAAAa,MAjBVa,eAiBUC,EAAAA,EAAAL,GAjBVI,gBAkBLE,EADe,SAAA,IAjBVF,gBAmBLG,EAAAA,8BAAAP,EAAA,IAnBKI,gCAsBDI,EAtBCJ,iBAyBNK,GACAC,KAAAA,EAnCDH,QAAAA,OAAAL,EAAA,WA+BC3B,GAAKiC,UAAUG,EAAS7B,EAASK,GACjCc,EAAMV,IAAI,IACVY,EAAUZ,IAAI,IACdkB,EAAalB,IAAI,IACjBmB,EAAYnB,IAAI,SAGjBqB,OAAOC,aAActC","file":"request.min.js","sourcesContent":["/* global jQuery, duck */\r\n\r\nvoid function initRequest($, duck){\r\n\t'use strict';\r\n\r\n\tconst $selectRequestForm = $('#SelectRequestForm');\r\n\tconst $requestForms = $('.js-request-form');\r\n\tconst $flash = $('#MakeRequestMessage');\r\n\r\n\t$selectRequestForm.on('change', () => {\r\n\t\t$requestForms.addClass('hidden');\r\n\r\n\t\t$(`.request-${$selectRequestForm.val()}`).removeClass('hidden');\r\n\t});\r\n\r\n\tfunction failed() {\r\n\t\t$flash.find('.alert-danger').show(0);\r\n\t\t$flash.show(0);\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\t$flash.slideUp(270)\r\n\t\t\t$flash.find('.alert-danger').slideUp(270);\r\n\t\t}, 5000)\r\n\t}\r\n\r\n\tfunction success(response) {\r\n\t\tif (response.msg === 'success') {\r\n\t\t\t$flash.find('.alert-success').show(0);\r\n\t\t\t$flash.show(0);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t$flash.slideUp(270)\r\n\t\t\t\t$flash.find('.alert-success').slideUp(270);\r\n\t\t\t}, 5000);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t$requestForms.find('[type=\"submit\"]').prop('disabled', false);\r\n\t\t\t}, 500);\r\n\t\t} else {\r\n\t\t\tfailed();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction error() { failed(); }\r\n\r\n\t$requestForms.each((i, form) => {\r\n\t\tconst $form = $(form);\r\n\r\n\t\t$form.find('[type=\"submit\"]').click((e) => {\r\n\t\t\t$form.find('[type=\"submit\"]').prop('disabled', true);\t\t\t\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst $type = $form.find('[name=\"type\"]');\r\n\t\t\tconst type = $form.find('[name=\"type\"]').val();\r\n\t\t\tconst $location = $form.find('[name=\"location\"]');\r\n\t\t\tconst location = $form.find('[name=\"location\"]').val();\r\n\t\t\tconst $description = $form.find('[name=\"description\"]');\r\n\t\t\tconst description = $form.find('[name=\"description\"]').val();\r\n\t\t\tconst $attraction = $form.find('[name=\"attraction\"]');\r\n\t\t\tconst attraction = $form.find('[name=\"attraction\"]').val();\r\n\r\n\t\t\tconst html = `\r\n\t\t\t\t<h1>New Request</h1>\r\n\t\t\t\t<h2>${$form.find('[name=\"from\"]').val()} requested a new ${type}</h2>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<strong>Name of ${$form.find('[name=\"type\"]').val()}</strong>: ${attraction ? attraction : location}\r\n\t\t\t\t\t${attraction ? '<br />' : ''}\r\n\t\t\t\t\t${attraction ? `<strong>Location: </strong>${location}` : ''}\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<p>${description}</p>\r\n\r\n\t\t\t`;\r\n\t\t\tconst request = {\r\n\t\t\t\thtml,\r\n\t\t\t\tsubject: `New ${type} Request`,\r\n\t\t\t};\r\n\r\n\t\t\tduck.sendEmail(request, success, error);\r\n\t\t\t$type.val('')\r\n\t\t\t$location.val('')\r\n\t\t\t$description.val('')\r\n\t\t\t$attraction.val('')\r\n\t\t});\r\n\t});\r\n}(jQuery.noConflict(), duck)"]}