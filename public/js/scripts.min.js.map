{"version":3,"sources":["js/scripts.js"],"names":["init","update","$","multiselect","click","duplicate","last","clone","after","find","removeClass","on","this","closest","detach","attr","String","addClass","$this","setTimeout","$countryLanguages","$currentCountryLanguageList","length","console","log","each","text","indexOf","substring","i","before","append","sort","a","b","replace","e","id","first","focus","updateValues","$form","$inputs","$values","unbind","toggleClass","window","slideUp","hide","jQuery","prototype","contains","search","start"],"mappings":"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","file":"js/scripts.min.js","sourcesContent":["void function($){\r\n\t// Once window is loaded, do this\r\n\t$(window).on('load', function(){\r\n\t\tsetTimeout(function(){\r\n\t\t\t$('.flash-message-container').slideUp(1000);\r\n\t\t}, 1500);\r\n\r\n\t\t\r\n\t\tinit(); \r\n\r\n\t\t// for updating countries\r\n\t\t$('.js-update-country').click(function(){\r\n\t\t\t$(this).hide();\r\n\t\t\t$('#Update').removeClass('hidden');\r\n\r\n\t\t\t$('.js-update').hide();\r\n\t\t\t$('.form-group').removeClass('hidden');\r\n\t\t});\r\n\t});\r\n}(jQuery);\r\n\r\n//////////////  Define Functions  //////////////////////\r\nfunction init(){\r\n\t// initilize all update pages\r\n\tupdate();\r\n\r\n\t// style multiselect via http://davidstutz.github.io/bootstrap-multiselect/\r\n\t$('select[multiple]').multiselect();\r\n\r\n\t// should probably be moved into it's own file\r\n\t$('.js-new-country .js-make-duplicate').click(function duplicateNativeNameRow(){\r\n\t\tvar duplicate = $('.js-duplicate').last().clone();\r\n\t\t$('.js-duplicate').last().after(duplicate);\r\n\t\t$('.js-duplicate').last().find('.hidden').removeClass('hidden');\r\n\t});\r\n\r\n\t$('.js-new-country').on('click', '.js-delete-row', function(){\r\n\t\t$(this).closest('.js-duplicate').detach();\r\n\t});\r\n\r\n\r\n\t// should probably be moved into it's own file\r\n\t$('.js-update-form .js-make-duplicate').click(function duplicateNativeNameRow(){\r\n\t\tvar duplicate = $('.js-duplicate').last().clone();\r\n\r\n\t\t$('.js-duplicate').last().after(duplicate);\r\n\t\t$('.js-duplicate').last().find('.js-name-language option').attr('selected', false);\r\n\t\t$('.js-duplicate').last().find('input[name=\"native.name\"]').attr('value', String());\r\n\t\t$('.js-duplicate').last().find('.form-control-static').addClass('hidden');\r\n\t});\r\n\r\n\t$('.js-update-form').on('click', '.js-delete-row', function(){\r\n\t\t$(this).closest('.js-duplicate').detach();\r\n\t});\r\n\t\r\n\t$('.js-languages .multiselect-container input').on('click', function(){\r\n\t\tvar $this = $(this);\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\tvar $countryLanguages = $this.closest('.multiselect-container').find('li.active');\r\n\t\t\tvar $currentCountryLanguageList = $('.js-name-language').find('option').length ? $('.js-name-language') : null; // <select> with each language as an <option>\r\n\r\n\t\t\tconsole.log('$countryLanguages');\r\n\t\t\tconsole.log($countryLanguages);\r\n\t\t\tconsole.log('$currentCountryLanguageList');\r\n\t\t\tconsole.log($currentCountryLanguageList);\r\n\t\t\t\r\n\t\t\t// if this language isn't in the country language list, add it as an option\r\n\t\t\t$countryLanguages.each(function(){\r\n\t\t\t\tif(!$currentCountryLanguageList){\r\n\t\t\t\t\t$('.js-name-language').append($('<option/>', {text: $(this).text().substring(1)}));\r\n\t\t\t\t} else if($currentCountryLanguageList.find('option').text().indexOf($(this).text().substring(1)) === -1){\r\n\t\t\t\t\tfor(var i in $('.js-name-language option')){\r\n\t\t\t\t\t\tif($(this).text().substring(1) < $($('.js-name-language option')[i]).text()){\r\n\t\t\t\t\t\t\t$($('.js-name-language option')[i]).before($('<option/>', {text: $(this).text().substring(1)}));\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(i == $('.js-name-language option').length -1){\r\n\t\t\t\t\t\t\t$('.js-name-language').append($('<option/>', {text: $(this).text().substring(1)}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// if this language is no longer one of the country languages- remove it\r\n\t\t\t$currentCountryLanguageList && $currentCountryLanguageList.find('option').each(function removeDeselectedLanguages(){\r\n\t\t\t\tif($countryLanguages.text().indexOf($(this).text()) === -1){\r\n\t\t\t\t\t$(this).detach();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$('.js-name-language option').sort(function sortAtoZ(a, b) {\r\n\t\t\t\ta = $(a).text().replace(' ', '');\r\n\t\t\t\tb = $(b).text().replace(' ', '');\r\n\r\n\t\t\t\tconsole.log(a);\r\n\t\t\t\tconsole.log(b);\r\n\r\n\t\t\t\t// compare\r\n\t\t\t\tif(a > b) {\r\n\t\t\t\t\tconsole.log(1);\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if(a < b) {\r\n\t\t\t\t\tconsole.log(2);\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(3);\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 100);\r\n\t});\r\n\t// end new file\r\n\r\n\t$('button[data-target]').click(function onClick(e){\r\n\t\tvar id = $(this).attr('data-target');\r\n\t\tsetTimeout(function focusElement(){\r\n\t\t\t$(id + ' input').first().focus();\r\n\t\t}, 200);\r\n\t});\r\n}\r\n\r\nfunction update(updateValues){\r\n\t//used for all update forms\r\n\r\n\tvar $form = $('.update-form');\r\n\r\n\tvar $inputs = $form.find('p + .hidden');\r\n\tvar $values = $form.find('.form-control-static');\r\n\r\n\tif(updateValues){\r\n\t\t$form.find('.btn-update').unbind('click');\r\n\r\n\t\t$inputs = $form.find('p + .hidden');\r\n\t\t$values = $form.find('.form-control-static');\r\n\t}\r\n\r\n\t// toggle between seeing input fields and\r\n\t$form.find('.btn-update').click(function(){\r\n\t\tvar $this = $(this);\r\n\r\n\t\t// toggle between static values and inputs\r\n\t\t$inputs.toggleClass('hidden');\r\n\t\t$values.toggleClass('hidden');\r\n\r\n\t\t// toggle native names area when there aren't any native names\r\n\t\t$('.js-no-native-name').toggleClass('hidden')\r\n\r\n\t\t// change color and text of the update button\r\n\t\t$this.toggleClass('btn-warning').toggleClass('btn-primary');\r\n\t\t$this.attr('value', $this.attr('value') === 'Update' ? 'Cancel' : 'Update');\r\n\r\n\t\t// toggle save button\r\n\t\t$form.find('.btn-save').toggleClass('hidden');\r\n\t});\r\n\t//save button saves the data\r\n}\r\n\r\n\r\n// polyfills\r\nif (!String.prototype.contains) {\r\n  String.prototype.contains = function(search, start) {\r\n    'use strict';\r\n    if (typeof start !== 'number') {\r\n      start = 0;\r\n    }\r\n    \r\n    if (start + search.length > this.length) {\r\n      return false;\r\n    } else {\r\n      return this.indexOf(search, start) !== -1;\r\n    }\r\n  };\r\n}"],"sourceRoot":"/source/"}