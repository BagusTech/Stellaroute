extends ../layout.pug

block content
	include header.pug

	.container.p-R
		//+shareThis(guide.cardImage)
		.row
			.col-sm-5.col-md-4.col-lg-3.mt-NegSm.mb-Lg.mtb-0--sm.mlr-NegMd.mlr-0--sm
				div(data-function='stickey')
					div(data-stickey='content')
						include guideNav.pug

			.col-xs-12.col-sm-7.col-md-8.col-lg-9.js-nav-nodes(duck-table='Guides', duck-function='update', duck-key='Id', duck-key-value=guide.Id)
				div(duck-field='cards', duck-type='array')
					div
						for _card, i in cards ? cards : [{}]
							- var card = _card.section
							.input-group.guide-card--admin.js-card(duck-type='object', class=`guide-card--${card.style}`)
								button.btn.btn-default.p-A.t-Sm.r-Sm.z-1.js-card-toggle: i.fa.fa-pencil(aria-hidden='true')
								.input-group-addon(data-sort='handle')
									i.fa.fa-arrows-v(aria-hidden='true')
								.panel.panel-default(data-function='accordion', data-position= i)
									.panel-heading(role='tab', aria-expanded='true'): h2.panel-title.js-card-title= card.title || 'New Card'
									.p-0(role='tabpanel', aria-hidden='false')
										.panel-body
											.row
												.col-xs-12.col-md-6.guide-card--edit
													.form-horizontal
														.form-group(duck-field='title', duck-type='string')
															label.col-sm-2.control-label Title
															.col-sm-10
																input.form-control(type='text', duck-value, value= card.title)
														.form-group(duck-field='image', duck-type='image')
															label.col-sm-2.control-label Image
															.col-sm-10
																input.hidden(type='hidden', duck-value, value= card.image)
																.form-control(duck-button='image-select')
																	i.fa.fa-image(aria-hidden='true')
																	span.pl-Sm(duck-image-value)= card && card.image || 'Please select an Image'
														.form-group(duck-field='text', duck-type='wysiwyg')
															label.col-sm-2.control-label Text
															.col-sm-10
																.summernote!= card.text
														.form-group(duck-field='style', duck-type='select')
															label.col-sm-2.control-label Style
															.col-sm-10
																select.form-control(duck-value)
																	option(value='big', selected= card.style === 'big') Big Card
																	option(value='small', selected= card.style === 'small') Small Card
																	option(value='section', selected= card.style === 'section') Section
																	option(value='sub', selected= card.style === 'sub') Sub Section
																	option(value='img', selected= card.style === 'img') Image Only
																	option(value='plain', selected= card.style === 'plain') Plain Text
																	option(value='white', selected= card.style === 'white') White Text
																	option(value='danger', selected= card.style === 'danger') Danger Text
																	option(value='success', selected= card.style === 'success') Success Text
																	option(value='info', selected= card.style === 'info') Info Text

															//.col-sm-10.col-sm-offset-2
																.card-styles--list
																	.row
																		.col-xs-3.card-styles--style(card-style='section')
																			.ta-C
																				.fw-B Title

																				div(style='line-height: .33;') ~~ ~ ~ ~~
																		.col-xs-3.card-styles--style(card-style='sub')
																			.bg-G__lt.p-Xs.ta-C.fw-B.br-Md Title
																		.col-xs-3.card-styles--style.card-styles--style__active(card-style='big')
																			.bg-G__ltr.ta-C
																				img(src='images/no-image.svg', height='20px')
																			strong Title
																			div(style='line-height: .33;') ~~ ~ ~ ~~
																		.col-xs-3.card-styles--style(card-style='small')
																			.w-25.f-L
																				.bg-G__ltr(style='height: 40px')
																					img.w-100(src='images/no-image.svg')
																			.w-75.f-L.pl-Xs
																				strong Title
																				div(style='line-height: .33;') ~~ ~ ~ ~~ ~~
																	.row
																		.col-xs-3.card-styles--style(card-style='img')
																			.bg-G__ltr
																				img.w-100(src='images/no-image.svg', height='40px')
																		.col-xs-3.card-styles--style(card-style='plain')
																			.alert.m-0.p-Xs ~~ ~
																		.col-xs-3.card-styles--style(card-style='white')
																			.content-card.m-0.p-Xs ~~ ~
																		.col-xs-3.card-styles--style(card-style='danger')
																			.alert.alert-danger.m-0.p-Xs ~ ~~
																	.row
																		.col-xs-3.card-styles--style(card-style='success')
																			.alert.alert-success.m-0.p-Xs ~~ ~
																		.col-xs-3.card-styles--style(card-style='info')
																			.alert.alert-info.m-0.p-Xs ~ ~~

												.col-xs-12.col-md-6.guide-card--view
													.card-styles--preview(card-style='section', class= card.style === 'section' && 'card-styles--preview__active')
														include cards/section.pug

													.card-styles--preview.guide-card--wrapper(card-style='sub', class= card.style === 'sub' && 'card-styles--preview__active')
														include cards/sub.pug

													.card-styles--preview.guide-card--wrapper(card-style='big', class= card.style === 'big' && 'card-styles--preview__active')
														include cards/big.pug										

													.card-styles--preview.guide-card--wrapper(card-style='small', class= card.style === 'small' && 'card-styles--preview__active')
														include cards/small.pug
													
													.card-styles--preview.guide-card--wrapper(card-style='img', class= card.style === 'img' && 'card-styles--preview__active')
														include cards/img.pug

													.card-styles--preview.guide-card--wrapper(card-style='plain', class= card.style === 'plain' && 'card-styles--preview__active')
														include cards/plain.pug
														
													.card-styles--preview.guide-card--wrapper(card-style='white', class= card.style === 'white' && 'card-styles--preview__active')
														include cards/white.pug
														
													.card-styles--preview.guide-card--wrapper(card-style='danger', class= card.style === 'danger' && 'card-styles--preview__active')
														include cards/danger.pug
														
													.card-styles--preview.guide-card--wrapper(card-style='success', class= card.style === 'success' && 'card-styles--preview__active')
														include cards/success.pug
														
													.card-styles--preview.guide-card--wrapper(card-style='info', class= card.style === 'info' && 'card-styles--preview__active')
														include cards/info.pug
														
										.panel-footer.text-right
											button.btn.btn-default.js-card-toggle Preview
								.input-group-btn
									button.btn.btn-danger(duck-button='delete')
										i.fa.fa-times(aria-hidden='true')
										span.sr-only Delete This Card
							for _subCard, j in _card.subCards ? _card.subCards : []
								- card = _subCard;
								.input-group.guide-card--admin.js-card(duck-type='object', class=`guide-card--${card.style}`)
									button.btn.btn-default.p-A.t-Sm.r-Sm.z-1.js-card-toggle: i.fa.fa-pencil(aria-hidden='true')
									.input-group-addon(data-sort='handle')
										i.fa.fa-arrows-v(aria-hidden='true')
									.panel.panel-default(data-function='accordion', data-position= (card.style === 'big' || card.style === 'sub') && `${i}.${j}`)
										.panel-heading(role='tab', aria-expanded='true'): h2.panel-title.js-card-title= card.title || 'New Card'
										.p-0(role='tabpanel', aria-hidden='false')
											.panel-body
												.row
													.col-xs-12.col-md-6.guide-card--edit
														.form-horizontal
															.form-group(duck-field='title', duck-type='string')
																label.col-sm-2.control-label Title
																.col-sm-10
																	input.form-control(type='text', duck-value, value= card.title)
															.form-group(duck-field='image', duck-type='image')
																label.col-sm-2.control-label Image
																.col-sm-10
																	input.hidden(type='hidden', duck-value, value= card.image)
																	.form-control(duck-button='image-select')
																		i.fa.fa-image(aria-hidden='true')
																		span.pl-Sm(duck-image-value)= card && card.image || 'Please select an Image'
															.form-group(duck-field='text', duck-type='wysiwyg')
																label.col-sm-2.control-label Text
																.col-sm-10
																	.summernote!= card.text
															.form-group(duck-field='style', duck-type='select')
																label.col-sm-2.control-label Style
																.col-sm-10
																	select.form-control(duck-value)
																		option(value='big', selected= card.style === 'big') Big Card
																		option(value='small', selected= card.style === 'small') Small Card
																		option(value='section', selected= card.style === 'section') Section
																		option(value='sub', selected= card.style === 'sub') Sub Section
																		option(value='img', selected= card.style === 'img') Image Only
																		option(value='plain', selected= card.style === 'plain') Plain Text
																		option(value='white', selected= card.style === 'white') White Text
																		option(value='danger', selected= card.style === 'danger') Danger Text
																		option(value='success', selected= card.style === 'success') Success Text
																		option(value='info', selected= card.style === 'info') Info Text

																//.col-sm-10.col-sm-offset-2
																	.card-styles--list
																		.row
																			.col-xs-3.card-styles--style(card-style='section')
																				.ta-C
																					.fw-B Title

																					div(style='line-height: .33;') ~~ ~ ~ ~~
																			.col-xs-3.card-styles--style(card-style='sub')
																				.bg-G__lt.p-Xs.ta-C.fw-B.br-Md Title
																			.col-xs-3.card-styles--style.card-styles--style__active(card-style='big')
																				.bg-G__ltr.ta-C
																					img(src='images/no-image.svg', height='20px')
																				strong Title
																				div(style='line-height: .33;') ~~ ~ ~ ~~
																			.col-xs-3.card-styles--style(card-style='small')
																				.w-25.f-L
																					.bg-G__ltr(style='height: 40px')
																						img.w-100(src='images/no-image.svg')
																				.w-75.f-L.pl-Xs
																					strong Title
																					div(style='line-height: .33;') ~~ ~ ~ ~~ ~~
																		.row
																			.col-xs-3.card-styles--style(card-style='img')
																				.bg-G__ltr
																					img.w-100(src='images/no-image.svg', height='40px')
																			.col-xs-3.card-styles--style(card-style='plain')
																				.alert.m-0.p-Xs ~~ ~
																			.col-xs-3.card-styles--style(card-style='white')
																				.content-card.m-0.p-Xs ~~ ~
																			.col-xs-3.card-styles--style(card-style='danger')
																				.alert.alert-danger.m-0.p-Xs ~ ~~
																		.row
																			.col-xs-3.card-styles--style(card-style='success')
																				.alert.alert-success.m-0.p-Xs ~~ ~
																			.col-xs-3.card-styles--style(card-style='info')
																				.alert.alert-info.m-0.p-Xs ~ ~~

													.col-xs-12.col-md-6.guide-card--view
														.card-styles--preview.guide-card--wrapper(card-style='section', class= card.style === 'section' && 'card-styles--preview__active')
															include cards/section.pug

														.card-styles--preview.guide-card--wrapper(card-style='sub', class= card.style === 'sub' && 'card-styles--preview__active')
															include cards/sub.pug

														.card-styles--preview.guide-card--wrapper(card-style='big', class= card.style === 'big' && 'card-styles--preview__active')
															include cards/big.pug										

														.card-styles--preview.guide-card--wrapper(card-style='small', class= card.style === 'small' && 'card-styles--preview__active')
															include cards/small.pug
														
														.card-styles--preview.guide-card--wrapper(card-style='img', class= card.style === 'img' && 'card-styles--preview__active')
															include cards/img.pug

														.card-styles--preview.guide-card--wrapper(card-style='plain', class= card.style === 'plain' && 'card-styles--preview__active')
															include cards/plain.pug
															
														.card-styles--preview.guide-card--wrapper(card-style='white', class= card.style === 'white' && 'card-styles--preview__active')
															include cards/white.pug
															
														.card-styles--preview.guide-card--wrapper(card-style='danger', class= card.style === 'danger' && 'card-styles--preview__active')
															include cards/danger.pug
															
														.card-styles--preview.guide-card--wrapper(card-style='success', class= card.style === 'success' && 'card-styles--preview__active')
															include cards/success.pug
															
														.card-styles--preview.guide-card--wrapper(card-style='info', class= card.style === 'info' && 'card-styles--preview__active')
															include cards/info.pug
															
											.panel-footer.text-right
												button.btn.btn-default.js-card-toggle Preview
									.input-group-btn
										button.btn.btn-danger(duck-button='delete')
											i.fa.fa-times(aria-hidden='true')
											span.sr-only Delete This Card
						
					p.text-right
						button.btn.btn-primary(type='submit', duck-button='submit') Save
						button.btn.btn-info(duck-button='add') Add Card